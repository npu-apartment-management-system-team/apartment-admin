import{r as o,j as e,R as Ve}from"./react-2ce75adb.js";import{c as ot}from"./react-dom-16e2f971.js";import{B as dt}from"./react-router-dom-93ff5a9d.js";import{a as ge}from"./axios-4a70c6fc.js";import{q as ct}from"./qs-88f287ae.js";import{J as ut}from"./js-encrypt-af0330d8.js";import{I as ne,T as Xe,B as R,M as mt,a as Ye,S as Le,b as Z,c as _e,d as pt,e as ht,D as Ie,R as H,f as be,C as U,g as xt,L as W,h as ce,H as ue,i as me,j as ke}from"./antd-a23284d1.js";import{U as We,y as ft,z as $e,m as qe,A as V}from"./@ant-design-2bd79a7c.js";import{u as Ke,a as ie,b as E,N as re}from"./react-router-e1c202a2.js";import{P as le}from"./pubsub-js-164616ad.js";import{v as te}from"./uuid-a960c1f4.js";import{s as Ne}from"./store-502a59ff.js";import"./call-bind-892c8155.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./scheduler-765c72db.js";import"./@remix-run-93d98c9a.js";import"./side-channel-b75e8576.js";import"./object-inspect-13342da8.js";import"./rc-util-68f98a54.js";import"./@babel-5495bcd4.js";import"./react-is-e8e5dbb3.js";import"./classnames-776d2d10.js";import"./rc-resize-observer-246dcd40.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./rc-motion-4ce3f50c.js";import"./rc-tabs-ad7b1b1e.js";import"./rc-dropdown-1e64d148.js";import"./@rc-component-1b94871b.js";import"./rc-menu-84eed2cd.js";import"./rc-overflow-cdd01579.js";import"./rc-select-47a8e25d.js";import"./rc-virtual-list-0be01e70.js";import"./rc-drawer-1676bf83.js";import"./rc-field-form-aa8598a5.js";import"./async-validator-7f96df71.js";import"./rc-dialog-e8c9bc58.js";import"./rc-table-2527d422.js";import"./throttle-debounce-87e7e444.js";import"./rc-checkbox-84dae2ea.js";import"./rc-tree-ed5c26ac.js";import"./@ctrl-fb5a5473.js";import"./rc-pagination-8db2162e.js";import"./rc-picker-db6157cb.js";import"./rc-tooltip-89186171.js";import"./rc-input-217e51a6.js";import"./rc-textarea-a7da98a1.js";import"./@emotion-c0b5c018.js";import"./stylis-fad5b415.js";(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))w(s);new MutationObserver(s=>{for(const I of s)if(I.type==="childList")for(const v of I.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&w(v)}).observe(document,{childList:!0,subtree:!0});function b(s){const I={};return s.integrity&&(I.integrity=s.integrity),s.referrerPolicy&&(I.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?I.credentials="include":s.crossOrigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function w(s){if(s.ep)return;s.ep=!0;const I=b(s);fetch(s.href,I)}})();const F=ge.create({baseURL:"https://apartment-server.wangminan.me",paramsSerializer:n=>ct.stringify(n,{arrayFormat:"brackets"})});F.interceptors.request.use(n=>(window.localStorage.getItem("token")!==void 0&&(n.headers.Authorization="Bearer "+window.localStorage.getItem("token")),n),n=>Promise.reject(n));F.interceptors.response.use(n=>(n!==null&&n.data!==null&&n.data.code!==null&&(n.data.code===4012||n.data.code===4010||n.data.code===4030)&&(window.localStorage.removeItem("token"),setTimeout(()=>{window.location.href="/login"},3e3)),n),n=>Promise.reject(n));const jt=`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA5vwYRBKySNSl/60qRqcD
lDVcNP9j2UyB7yalGI9MtlBEZ16pEiR08TuZjUL00go5LEb6z+ghVlp6UOsWR6i3
r7Q+FleKHG2yStqqaWx+11OQzOjffXQwqb1t/0bq/tzy04KBinSaB/yqnMc0yO8n
rZx8OtUX5rMcM7BjvpFOdnCSFUAOOfKRirfT5RydyGeLPOnBTwJIwpygGu20++UX
MxARO1aAJeUXeI+9g+XcsAi1EKbI2YdjWJ8PQnBC9+lsDRS3w8uKqUOZdYu/FxAy
bEjQ+YOXzfu2PB9+BdilkztV/yuF6hfk7MpGdA2JoBsJlljSYWH1mUE+e9mnUyHi
/wIDAQAB`;function gt(n){const y=new ut;return y.setPublicKey(jt),y.encrypt(n)}function yt(n){const y="13777864454",b="root",[w,s]=o.useState(y),[I,v]=o.useState(b),[L,m]=o.useState(!1);function A(f){s(()=>f.target.value)}function P(f){v(()=>f.target.value)}function l(){m(!0),F({method:"POST",url:"/api/auth/login/password",data:{username:w,password:gt(I)}}).then(f=>{const{code:i,result:d}=f.data;if(i===2e3)if(window.localStorage.setItem("token",d.token),window.localStorage.setItem("role",d.role),d.user)d.user,n.login(d.role,d.user);else{const u=d.admin;window.localStorage.setItem("user.id",u.id),window.localStorage.setItem("user.name",u.name),window.localStorage.setItem("user.loginAccountId",u.loginAccountId),window.localStorage.setItem("user.email",u.email),n.login(d.role,d.admin)}else{const{msg:u}=f.data;v(""),alert(u)}m(!1)})}return e.jsxs("div",{children:[e.jsx(ne,{value:w,onChange:A,placeholder:"Enter your username",prefix:e.jsx(We,{className:"site-form-item-icon"}),suffix:e.jsx(Xe,{title:"Extra information",children:e.jsx(ft,{style:{color:"rgba(0,0,0,.45)"}})})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(ne.Password,{value:I,onChange:P,placeholder:"input password",iconRender:f=>f?e.jsx($e,{}):e.jsx(qe,{})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(R,{size:"large",type:"primary",loading:L,onClick:l,children:"Login"})]})}function It(){const[n,y]=o.useState(""),[b,w]=o.useState(""),[s,I]=o.useState(""),[v,L]=o.useState("");function m(i){y(()=>i.target.value)}function A(i,d){L(d!==""&&i!==d?()=>"error":()=>"")}function P(i){w(()=>i.target.value),A(i.target.value,s)}function l(i){I(()=>i.target.value),A(b,i.target.value)}function f(i){b!==s&&alert("")}return e.jsxs("div",{children:[e.jsx(ne,{onChange:m,placeholder:"default size",prefix:e.jsx(We,{})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(ne.Password,{onChange:P,placeholder:"input password",iconRender:i=>i?e.jsx($e,{}):e.jsx(qe,{})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(ne.Password,{status:v,onChange:l,placeholder:"password again",iconRender:i=>i?e.jsx($e,{}):e.jsx(qe,{})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(R,{size:"large",type:"primary",onClick:f,children:"SignUP"})]})}const bt=""+new URL("apartment-d819f74c.svg",import.meta.url).href;function pe(n){const{routers:y}=n,b=Ke();function w(s){b("/home"+y[parseInt(s.key,10)-1].route,{replace:!0})}return e.jsx("div",{children:e.jsx("div",{children:e.jsx(mt,{mode:n.mode,theme:n.theme,items:n.textitem,onClick:w})})})}function he(n){return e.jsx(Xe,{placement:"right",title:"先生/女士",children:e.jsxs("span",{children:["欢迎您，",n.job," ",n.usermsg]})})}function St(n){const{tableitems:y,openAddDrawer:b,tabletype:w,addMsg:s,addfun:I}=n,[v,L]=o.useState(!1),[m,A]=o.useState(!1),[P,l]=o.useState("请在下方补全需要添加的条目 "),f=()=>{l(u=>u+s),b(),L(!0)},i=()=>{A(!0),I(),A(!1)},d=()=>{L(!1)};return e.jsxs("div",{children:[e.jsx(R,{type:"primary",onClick:f,children:"增加条目"}),e.jsxs(Ye,{title:w,open:v,onOk:i,okText:"提交",confirmLoading:m,onCancel:d,cancelText:"关闭",children:[e.jsx("p",{children:P}),y]})]})}function Te(n){const{checkonly:y}=n,{tableitems:b,openAddDrawer:w,addMsg:s,addfun:I}=n,{getApart:v,getRoom:L,getBed:m,getOutPay:A}=n;let{tabletype:P,columns:l,tabledata:f,tablepage:i,tabletitle:d}=n;const[u,x]=o.useState(!1);le.subscribe("tablereturned",(G,D)=>{x(()=>D)});const[,h]=Ve.useState(),J=Ve.useCallback(()=>h({}),[]);return o.useEffect(()=>{P==="apart"?(x(!1),v(1,100),J()):P==="room"?(x(!1),L(1,100),J()):P==="bed"?(x(!1),m(1,100)):P==="outpay"&&(x(!1),A(1,100))},[P]),u?y?e.jsx("div",{children:e.jsxs(Z,{direction:"vertical",size:16,children:[e.jsx("h2",{children:d}),e.jsx(_e,{columns:l,dataSource:f,pagination:!1})]})}):(le.subscribe("tablepage",(G,D)=>{i=D}),e.jsx("div",{children:e.jsxs(Z,{direction:"vertical",size:16,children:[e.jsx("h2",{children:d}),e.jsx(St,{openAddDrawer:w,tableitems:b,tabletype:P,addMsg:s,addfun:I}),e.jsx(_e,{columns:l,dataSource:f,pagination:!1})]})})):e.jsx("div",{children:e.jsx(Le,{})})}function wt(n){const{type:y,transdata:b,send:w}=n,[s,I]=o.useState([]),[v,L]=o.useState([]),[m,A]=o.useState("");function P(){let u=[];for(let x=0;x<s.length;x++)for(let h=0;h<b.length;h++)s[x]===b[h].key&&u.push(b[h].id);w(u,m,y),A("")}function l(u){A(u.target.value)}const f=(u,x,h)=>{I(u)},i=(u,x)=>{L([...u,...x])},d=(u,x)=>{};return e.jsxs("div",{className:"transferbox",children:[e.jsx("div",{children:e.jsx(pt,{dataSource:b,titles:["用户列表","发送给"],targetKeys:s,selectedKeys:v,onChange:f,onSelectChange:i,onScroll:d,render:u=>u.title})}),e.jsx(ht,{showCount:!0,maxLength:4096,style:{height:120,resize:"none"},onChange:l,placeholder:"请在此键入发信内容",value:m}),e.jsx(R,{onClick:P,children:"发送"})]})}function Ct(n){const[y,b]=o.useState([]),[w,s]=o.useState([]),{lognum:I,userid:v}=n;o.useEffect(()=>{ge.defaults.baseURL="https://apartment-server.wangminan.me",m(1,100),A(1,100)},[]);function L(P,l,f){f==="user"?F({method:"POST",url:"/api/message/sender/send",data:{senderAdminId:v,receiverAdminIds:[],receiverUserIds:P,message:l}}).then(i=>{const{code:d,msg:u}=i.data;alert(d===2e3?"发送成功":u)}):f==="admin"?F({method:"POST",url:"/api/message/sender/send",data:{senderAdminId:v,receiverAdminIds:P,receiverUserIds:[],message:l}}).then(i=>{const{code:d,msg:u}=i.data;alert(d===2e3?"发送成功":u)}):alert("发送对象非法")}function m(P,l){F({method:"GET",url:`/api/user/user?pageNum=${P}&pageSize=${l}`}).then(f=>{const{code:i}=f.data;if(i===2e3){const{list:d}=f.data.result;let u=[];for(let x=0;x<d.length;x++){let h={};h.key=te(),h.title=d[x].name,h.name=d[x].name,h.id=d[x].id,h.loginAccountId=d[x].loginAccountId,h.personalId=d[x].personalId,u.push(h)}b(u)}else{const{msg:d}=f.data;alert(d)}})}function A(P,l){F({method:"GET",url:`/api/user/admin?pageNum=${P}&pageSize=${l}`}).then(f=>{const{code:i}=f.data;if(i===2e3){const{list:d}=f.data.result;let u=[];for(let x=0;x<d.length;x++){let h={};h.key=te(),h.title=d[x].name,h.name=d[x].name,h.id=d[x].id,h.loginAccountId=d[x].loginAccountId,h.departmentId=d[x].departmentId,h.email=d[x].email,u.push(h)}s(u)}else{const{msg:d}=f.data;alert(d)}})}return e.jsxs("div",{children:[e.jsx("h1",{children:"催收信发送"}),e.jsx("h3",{children:"发送给用户"}),e.jsx(wt,{type:"user",transdata:y,send:L})]})}function xe(){o.useState(!1),o.useEffect(()=>{ge.defaults.baseURL="https://apartment-server.wangminan.me",n(1,100)},[]);function n(y,b){F({method:"GET",url:`/api/message/receiver/inbox?pageNum=${y}&pageSize=${b}`}).then(w=>{const{code:s,result:I}=w.data;if(s!==2e3){const{msg:v}=w.data;alert(v)}})}return e.jsx("div",{})}const vt=[{title:"床位ID",dataIndex:"id",key:"id"},{title:"床位名",dataIndex:"name",key:"name"},{title:"所属房间的id",dataIndex:"roomId",key:"roomId"},{title:"押金收据单号",dataIndex:"receiptId",key:"receiptId"},{title:"床位使用情况",dataIndex:"isInUse",key:"isInUse"}];function ze(n){const{lognum:y}=n,[b,w]=o.useState(!1),[s,I]=o.useState([{id:"",userId:"",name:"",type:"",applicationStatus:"",depositStatus:"",paymentId:"",createTime:"",updateTime:"",fileUrl:""}]),[v,L]=o.useState([]),[m,A]=o.useState(0),[P,l]=o.useState(!1),[f,i]=o.useState(!1),[d,u]=o.useState(!1),[x,h]=o.useState(""),{tableitems:J,tabledata:G,tablepage:D,tabletitle:N}=n,{getBed:B}=n,[z,Se]=o.useState(!0),[Ue,S]=o.useState(!1),se=Ke();o.useEffect(()=>{ge.defaults.baseURL="https://apartment-server.wangminan.me",y===3?Q(1,100):Ae(1,100)},[]);function De(){let M=[];I($=>{for(let q=0;q<$.length;q++)M.push(e.jsx(U,{className:"gutter-row",span:8,children:e.jsxs(xt,{title:$[q].type+"申请",bordered:!1,children:[e.jsx(K,{title:"ID",content:$[q].id}),e.jsx(K,{title:"Type",content:$[q].type}),e.jsx(K,{title:"ApplicationStatus",content:$[q].applicationStatus}),e.jsx("p",{}),e.jsx(R,{onClick:()=>ye(q),children:"查看"})]})}));return L(M),$})}function Q(M,$){F({method:"GET",url:`/api/application/apply/status/center?pageNum=${M}&pageSize=${$}`}).then(q=>{const{code:Ce,result:ve}=q.data;if(Ce===2e3){const{list:g}=ve;if(g.length===0){S(!0),PubSub.publish("cardsreturned",!0);return}let ae=[];for(let C=0;C<g.length;C++){let k={};k.key=te(),k.id=g[C].id,k.userId=g[C].userId,k.paymentId=g[C].paymentId,g[C].type===0?k.type="入住":g[C].type===1?k.type="调宿":g[C].type===2&&(k.type="退宿"),k.fileUrl=g[C].fileUrl,k.applicationStatus=g[C].applicationStatus,g[C].depositStatus===0?k.depositStatus="未缴纳":g[C].depositStatus===1?k.depositStatus="已缴纳":g[C].depositStatus===2&&(k.depositStatus="已退回"),k.createTime=g[C].createTime,k.updateTime=g[C].updateTime,ae.push(k)}I(ae),De(),PubSub.publish("cardsreturned",!0)}else{const{msg:g}=q.data;alert(g)}})}function Ae(M,$){F({method:"GET",url:`/api/application/apply/status/center/checkin?pageNum=${M}&pageSize=${$}`}).then(q=>{const{code:Ce,result:ve}=q.data;if(Ce===2e3){const{list:g}=ve;if(g.length===0){S(!0),PubSub.publish("cardsreturned",!0);return}let ae=[];for(let C=0;C<g.length;C++){let k={};k.key=te(),k.id=g[C].id,k.userId=g[C].userId,k.paymentId=g[C].paymentId,g[C].type===0?k.type="入住":g[C].type===1?k.type="调宿":g[C].type===2&&(k.type="退宿"),k.fileUrl=g[C].fileUrl,k.applicationStatus=g[C].applicationStatus,g[C].depositStatus===0?k.depositStatus="未缴纳":g[C].depositStatus===1?k.depositStatus="已缴纳":g[C].depositStatus===2&&(k.depositStatus="已退回"),k.createTime=g[C].createTime,k.updateTime=g[C].updateTime,ae.push(k)}I(ae),De(),PubSub.publish("cardsreturned",!0)}else{const{msg:g}=q.data;alert(g)}})}function Pe(){i(!0)}function Ee(){u(!0),F({method:"POST",url:"/api/application/apply/status/center",data:{id:s[m].id,bedId:x}}).then(M=>{const{code:$}=M.data;if($===2e3)alert("分配完成"),u(!1),Q(1,100);else{const{msg:q}=M.data;alert(q),u(!1)}})}function He(){i(!1)}function Ge(M){h(M.target.value)}const ye=M=>{A(()=>M),w(!0)},oe=()=>{w(!1)};function de(){F({method:"POST",url:"/api/application/apply/status/center/checkin",data:{id:s[m].id,pass:z}}).then(M=>{const{code:$}=M.data;if($===2e3)alert("审批完成"),Ae(1,100);else{const{msg:q}=M.data;alert(q)}})}function Be(){Se(!0),de()}function we(){Se(!1),de()}function Oe(){se("/home/welcome")}if(PubSub.subscribe("cardsreturned",(M,$)=>{l($)}),P){if(Ue===!0)return e.jsxs("div",{children:[e.jsx(Ie,{orientation:"middle",children:"申请页面"}),e.jsx("p",{children:"暂时没有新的申请，休息一下吧"}),e.jsx(R,{onClick:Oe,children:"刷新"})]});if(y===3)return e.jsxs("div",{children:[e.jsx(Ie,{orientation:"middle",children:"申请页面"}),e.jsx(H,{gutter:[16,20],children:v}),e.jsxs(be,{width:640,placement:"right",closable:!1,onClose:oe,open:b,children:[e.jsx("p",{className:"site-description-item-profile-p",style:{marginBottom:24},children:"申请表"}),e.jsx("br",{}),e.jsxs(H,{children:[e.jsx(U,{span:12,children:e.jsx(K,{title:"ID",content:s[m].id})}),e.jsx(U,{span:12,children:e.jsx(K,{title:"UserID",content:s[m].userId})})]}),e.jsxs(H,{children:[e.jsx(U,{span:12,children:e.jsx(K,{title:"Type",content:s[m].type})}),e.jsx(U,{span:12,children:e.jsx(K,{title:"ApplicationStatus",content:s[m].applicationStatus})})]}),e.jsxs(H,{children:[e.jsx(U,{span:24,children:e.jsx(K,{title:"DepositStatus",content:s[m].depositStatus})}),e.jsx(U,{span:24,children:e.jsx(K,{title:"PaymentId",content:s[m].paymentId})})]}),e.jsxs(H,{children:[e.jsx(U,{span:24,children:e.jsx(K,{title:"createTime",content:s[m].createTime})}),e.jsx(U,{span:24,children:e.jsx(K,{title:"updateTime",content:s[m].updateTime})})]}),e.jsx(H,{children:e.jsx(U,{span:24,children:e.jsx("a",{href:s[m].fileUrl,children:"申请详情"})})}),e.jsx(Ie,{}),e.jsx(R,{onClick:oe,children:"Back"}),e.jsx(R,{type:"primary",onClick:Pe,children:"分配床位"})]}),e.jsxs(Ye,{title:"Title",open:f,onOk:Ee,okText:"提交",confirmLoading:d,onCancel:He,cancelText:"关闭",children:[e.jsxs("p",{children:["请在此键入要分配给",s[m].userId,"号用户的床位"]}),e.jsx(ne,{onChange:Ge}),e.jsx(Te,{checkonly:!0,tableitems:J,getBed:B,tabletype:"bed",columns:vt,tabledata:G,tablepage:D,tabletitle:N})]})]});if(y===2)return e.jsxs("div",{children:[e.jsx(Ie,{orientation:"middle",children:"申请页面"}),e.jsx(H,{gutter:[16,20],children:v}),e.jsxs(be,{width:640,placement:"right",closable:!1,onClose:oe,open:b,children:[e.jsx("p",{className:"site-description-item-profile-p",style:{marginBottom:24},children:"申请表"}),e.jsx("br",{}),e.jsxs(H,{children:[e.jsx(U,{span:12,children:e.jsx(K,{title:"ID",content:s[m].id})}),e.jsx(U,{span:12,children:e.jsx(K,{title:"UserID",content:s[m].userId})})]}),e.jsxs(H,{children:[e.jsx(U,{span:12,children:e.jsx(K,{title:"Type",content:s[m].type})}),e.jsx(U,{span:12,children:e.jsx(K,{title:"ApplicationStatus",content:s[m].applicationStatus})})]}),e.jsxs(H,{children:[e.jsx(U,{span:24,children:e.jsx(K,{title:"DepositStatus",content:s[m].depositStatus})}),e.jsx(U,{span:24,children:e.jsx(K,{title:"PaymentId",content:s[m].paymentId})})]}),e.jsxs(H,{children:[e.jsx(U,{span:24,children:e.jsx(K,{title:"createTime",content:s[m].createTime})}),e.jsx(U,{span:24,children:e.jsx(K,{title:"updateTime",content:s[m].updateTime})})]}),e.jsx(H,{children:e.jsx(U,{span:24,children:e.jsx("a",{href:s[m].fileUrl,children:"申请详情"})})}),e.jsx(Ie,{}),e.jsx(R,{onClick:oe,children:"Back"}),e.jsx(R,{type:"primary",onClick:Be,children:"批准"}),e.jsx(R,{onClick:we,children:"驳回"})]})]})}else return e.jsxs("div",{children:[e.jsx(Ie,{orientation:"middle",children:"申请页面"}),e.jsx(Le,{})]})}const K=({title:n,content:y})=>e.jsxs("div",{className:"site-description-item-profile-wrapper",children:[e.jsxs("p",{className:"site-description-item-profile-p-label",children:[n,":"]}),y]});function kt(n){const[y,b]=o.useState(""),[w,s]=o.useState(!1),[I,v]=o.useState(""),[L,m]=o.useState(!1),{getOutPay:A}=n,{tabletype:P,columns:l,tabledata:f,tablepage:i,tabletitle:d,tableitems:u}=n;o.useState(!1),o.useEffect(()=>{ge.defaults.baseURL="https://apartment-server.wangminan.me",A(1,100),x(),h()},[]);function x(){F({method:"GET",url:"/api/finance/center/withhold/download"}).then(D=>{const{code:N}=D.data;if(N===2e3){const{result:B}=D.data;b(B),s(!0)}else{const{msg:B}=D.data;alert(B)}})}function h(){F({method:"GET",url:"/api/finance/center/charge/download"}).then(D=>{const{code:N}=D.data;if(N===2e3){const{result:B}=D.data;v(B),m(!0)}else{const{msg:B}=D.data;alert(B)}})}function J(){window.open(y)}function G(){window.open(I)}return w&&L?e.jsxs("div",{children:[e.jsx(R,{onClick:J,children:"下载外部单位代扣表"}),e.jsx(Te,{tableitems:u,checkonly:!0,tabletype:"outpay",getOutPay:A,columns:l,tabledata:f,tablepage:i,tabletitle:d}),e.jsx("br",{}),e.jsx(R,{onClick:G,children:"下载自收表"})]}):e.jsx("div",{children:e.jsx(Le,{})})}const fe={textAlign:"center",minHeight:120,lineHeight:"120px",color:"#000",backgroundColor:"#eee"},je={textAlign:"center",lineHeight:"120px"};function Tt(n){const{logOut:y}=n,{openAddDrawer:b,tableitems:w}=n,{apartAdd:s,roomAdd:I,bedAdd:v}=n,{getApart:L,getRoom:m,getBed:A,getOutPay:P}=n,{lognum:l,userid:f,textitem:i,usermsg:d,columns:u,tabledata:x,tablepage:h,tabletitle:J}=n,G=i[l].routers,[D,N]=o.useState(!1);function B(){y()}if(l===1)return e.jsx(Z,{direction:"vertical",style:{width:"100%"},size:[0,48],children:e.jsxs(W,{style:{minHeight:"100vh"},children:[e.jsx(ce,{style:je,collapsible:!0,collapsed:D,onCollapse:z=>N(z),children:e.jsx(pe,{mode:"inline",theme:"dark",textitem:i[l].item,routers:G})}),e.jsxs(W,{children:[e.jsx(ue,{children:e.jsxs(H,{children:[e.jsx(U,{span:12,style:{display:"flex",justifyContent:"start",alignItems:"center"},children:e.jsx(xe,{})}),e.jsx(U,{span:12,style:{display:"flex",justifyContent:"end",alignItems:"center"},children:e.jsx(R,{onClick:B,children:"LogOut"})})]})}),e.jsx(me,{style:fe,children:e.jsxs(ie,{children:[e.jsx(E,{path:"/home/welcome",element:e.jsx(he,{job:i[l].name,usermsg:d})}),e.jsx(E,{path:"*",element:e.jsx(re,{to:"/home/welcome"})})]})})]})]})});if(l===2)return e.jsx(Z,{direction:"vertical",style:{width:"100%"},size:[0,48],children:e.jsxs(W,{style:{minHeight:"100vh"},children:[e.jsx(ce,{style:je,collapsible:!0,collapsed:D,onCollapse:z=>N(z),children:e.jsx(pe,{mode:"inline",theme:"dark",textitem:i[l].item,routers:G})}),e.jsxs(W,{children:[e.jsx(ue,{children:e.jsxs(H,{children:[e.jsx(U,{span:12,style:{display:"flex",justifyContent:"start",alignItems:"center"},children:e.jsx(xe,{})}),e.jsx(U,{span:12,style:{display:"flex",justifyContent:"end",alignItems:"center"},children:e.jsx(R,{onClick:B,children:"LogOut"})})]})}),e.jsx(me,{style:fe,children:e.jsxs(ie,{children:[e.jsx(E,{path:"/home/welcome",element:e.jsx(he,{job:i[l].name,usermsg:d})}),e.jsx(E,{path:"/home/checkin",element:e.jsx(ze,{lognum:l})}),e.jsx(E,{path:"*",element:e.jsx(re,{to:"/home/welcome"})})]})})]})]})});if(l===3)return e.jsx(Z,{direction:"vertical",style:{width:"100%"},size:[0,48],children:e.jsxs(W,{style:{minHeight:"100vh"},children:[e.jsx(ce,{style:je,collapsible:!0,collapsed:D,onCollapse:z=>N(z),children:e.jsx(pe,{mode:"inline",theme:"dark",textitem:i[l].item,routers:G})}),e.jsxs(W,{children:[e.jsx(ue,{children:e.jsxs(H,{children:[e.jsx(U,{span:12,style:{display:"flex",justifyContent:"start",alignItems:"center"},children:e.jsx(xe,{})}),e.jsx(U,{span:12,style:{display:"flex",justifyContent:"end",alignItems:"center"},children:e.jsx(R,{onClick:B,children:"LogOut"})})]})}),e.jsx(me,{style:fe,children:e.jsxs(ie,{children:[e.jsx(E,{path:"/home/welcome",element:e.jsx(he,{job:i[l].name,usermsg:d})}),e.jsx(E,{path:"/home/promise",element:e.jsx(ze,{lognum:l,tableitems:w,getBed:A,tabletype:"bed",columns:u,tabledata:x,tablepage:h,tabletitle:J})}),e.jsx(E,{path:"/home/apart",element:e.jsx(Te,{tableitems:w,openAddDrawer:()=>b("apart"),addMsg:i[l].addmessages.apart,addfun:s,getApart:L,tabletype:"apart",columns:u,tabledata:x,tablepage:h,tabletitle:J})}),e.jsx(E,{path:"/home/room",element:e.jsx(Te,{tableitems:w,openAddDrawer:()=>b("room"),addMsg:i[l].addmessages.room,addfun:I,getRoom:m,tabletype:"room",columns:u,tabledata:x,tablepage:h,tabletitle:J})}),e.jsx(E,{path:"/home/bed",element:e.jsx(Te,{tableitems:w,openAddDrawer:()=>b("bed"),addMsg:i[l].addmessages.bed,addfun:v,getBed:A,tabletype:"bed",columns:u,tabledata:x,tablepage:h,tabletitle:J})}),e.jsx(E,{path:"*",element:e.jsx(re,{to:"/home/welcome"})})]})})]})]})});if(l===4)return e.jsx(Z,{direction:"vertical",style:{width:"100%"},size:[0,48],children:e.jsxs(W,{style:{minHeight:"100vh"},children:[e.jsx(ce,{style:je,collapsible:!0,collapsed:D,onCollapse:z=>N(z),children:e.jsx(pe,{mode:"inline",theme:"dark",textitem:i[l].item,routers:G})}),e.jsxs(W,{children:[e.jsx(ue,{children:e.jsxs(H,{children:[e.jsx(U,{span:12,style:{display:"flex",justifyContent:"start",alignItems:"center"},children:e.jsx(xe,{})}),e.jsx(U,{span:12,style:{display:"flex",justifyContent:"end",alignItems:"center"},children:e.jsx(R,{onClick:B,children:"LogOut"})})]})}),e.jsx(me,{style:fe,children:e.jsxs(ie,{children:[e.jsx(E,{path:"/home/welcome",element:e.jsx(he,{job:i[l].name,usermsg:d})}),e.jsx(E,{path:"/home/paylist",element:e.jsx(kt,{tableitems:w,getOutPay:P,tabletype:"bed",columns:u,tabledata:x,tablepage:h,tabletitle:J})}),e.jsx(E,{path:"/home/collectmsg",element:e.jsx(Ct,{lognum:l,userid:f})}),e.jsx(E,{path:"*",element:e.jsx(re,{to:"/home/welcome"})})]})})]})]})});if(l===5)return e.jsx(Z,{direction:"vertical",style:{width:"100%"},size:[0,48],children:e.jsxs(W,{style:{minHeight:"100vh"},children:[e.jsx(ce,{style:je,collapsible:!0,collapsed:D,onCollapse:z=>N(z),children:e.jsx(pe,{mode:"inline",theme:"dark",textitem:i[l].item,routers:G})}),e.jsxs(W,{children:[e.jsx(ue,{children:e.jsxs(H,{children:[e.jsx(U,{span:12,style:{display:"flex",justifyContent:"start",alignItems:"center"},children:e.jsx(xe,{})}),e.jsx(U,{span:12,style:{display:"flex",justifyContent:"end",alignItems:"center"},children:e.jsx(R,{onClick:B,children:"LogOut"})})]})}),e.jsx(me,{style:fe,children:e.jsxs(ie,{children:[e.jsx(E,{path:"/home/welcome",element:e.jsx(he,{job:i[l].name,usermsg:d})}),e.jsx(E,{path:"*",element:e.jsx(re,{to:"/home/welcome"})})]})})]})]})});if(l===6)return e.jsx(Z,{direction:"vertical",style:{width:"100%"},size:[0,48],children:e.jsxs(W,{style:{minHeight:"100vh"},children:[e.jsx(ce,{style:je,collapsible:!0,collapsed:D,onCollapse:z=>N(z),children:e.jsx(pe,{mode:"inline",theme:"dark",textitem:i[l].item,routers:G})}),e.jsxs(W,{children:[e.jsx(ue,{children:e.jsxs(H,{children:[e.jsx(U,{span:12,style:{display:"flex",justifyContent:"start",alignItems:"center"},children:e.jsx(xe,{})}),e.jsx(U,{span:12,style:{display:"flex",justifyContent:"end",alignItems:"center"},children:e.jsx(R,{onClick:B,children:"LogOut"})})]})}),e.jsx(me,{style:fe,children:e.jsxs(ie,{children:[e.jsx(E,{path:"/home/welcome",element:e.jsx(he,{job:i[l].name,usermsg:d})}),e.jsx(E,{path:"/home/checkin",element:e.jsx(ze,{lognum:l})}),e.jsx(E,{path:"*",element:e.jsx(re,{to:"/home/welcome"})})]})})]})]})});if(l===7)return e.jsx(Z,{direction:"vertical",style:{width:"100%"},size:[0,48],children:e.jsxs(W,{style:{minHeight:"100vh"},children:[e.jsx(ce,{style:je,collapsible:!0,collapsed:D,onCollapse:z=>N(z),children:e.jsx(pe,{mode:"inline",theme:"dark",textitem:i[l].item,routers:G})}),e.jsxs(W,{children:[e.jsx(ue,{children:e.jsxs(H,{children:[e.jsx(U,{span:12,style:{display:"flex",justifyContent:"start",alignItems:"center"},children:e.jsx(xe,{})}),e.jsx(U,{span:12,style:{display:"flex",justifyContent:"end",alignItems:"center"},children:e.jsx(R,{onClick:B,children:"LogOut"})})]})}),e.jsx(me,{style:fe,children:e.jsxs(ie,{children:[e.jsx(E,{path:"/home/welcome",element:e.jsx(he,{job:i[l].name,usermsg:d})}),e.jsx(E,{path:"*",element:e.jsx(re,{to:"/home/welcome"})})]})})]})]})})}function Ut(n){const{apartUpdate:y,roomUpdate:b,bedUpdate:w}=n,{type:s,title:I,placement:v,onClose:L,open:m,tableitems:A,records:P}=n,[l,f]=o.useState(!1),[i,d]=o.useState(0),[u,x]=o.useState({status:0});function h(){f(!0),y(P.index,u),f(!1)}function J(N){x(B=>(B.status=N.target.value,B)),d(N.target.value)}function G(){f(!0),b(P.index),f(!1)}function D(){f(!0),w(P.index),f(!1)}if(A.length===0)return e.jsx(be,{title:I,placement:v,onClose:L,open:m,children:e.jsx(Le,{})});if(s==="apart")return e.jsxs(be,{title:I,placement:v,onClose:L,open:m,children:[A,"此公寓",e.jsxs(ke.Group,{onChange:J,value:i,children:[e.jsx(ke,{value:0,children:"正常使用"}),e.jsx(ke,{value:1,children:"启用中"}),e.jsx(ke,{value:2,children:"弃用中"}),e.jsx(ke,{value:3,children:"已弃用"})]}),e.jsx("br",{}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx(R,{type:"primary",loading:l,onClick:h,children:"修改"})})]});if(s==="room")return e.jsxs(be,{title:I,placement:v,onClose:L,open:m,children:[A,e.jsx("br",{}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx(R,{type:"primary",loading:l,onClick:G,children:"修改"})})]});if(s==="bed")return e.jsxs(be,{title:I,placement:v,onClose:L,open:m,children:[A,e.jsx("br",{}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx(R,{type:"primary",loading:l,onClick:D,children:"修改"})})]})}function _(n,y,b,w,s){return{key:y,icon:b,children:w,label:n,type:s}}const At=[{},{id:1,name:"超级管理员",item:[_("管理员账号管理","1",e.jsx(V,{})),_("外部单位管理","2",e.jsx(V,{})),_("公寓管理","3",e.jsx(V,{})),_("房间管理","4",e.jsx(V,{}))]},{id:2,name:"入住办理员",item:[_("入住申请审核","1",e.jsx(V,{})),_("床位编号录入","2",e.jsx(V,{})),_("人脸录入确认","3",e.jsx(V,{}))],routers:[{route:"/checkin"},{route:"/bedid"},{route:"/face"}]},{id:3,name:"宿舍调配员",item:[_("住/调宿申请","1",e.jsx(V,{})),_("公寓管理","2",e.jsx(V,{})),_("房间管理","3",e.jsx(V,{})),_("床位管理","4",e.jsx(V,{}))],routers:[{route:"/promise"},{route:"/apart"},{route:"/room"},{route:"/bed"}],addmessages:{apart:"name为公寓名 position为公寓地址 location为经纬度地址",room:"name为宿舍号 sex为性别，应填写“男”或“女” usage为宿舍用途 type为房间种类，应填写“n人间”，n为整数 isForCadre为干部房标识，应填写“是”或“否” isReserved代表此房间是否保留，应填写“是”或“否” totalFee为宿舍费用 selfPayFee为自费费用 refundFee为单位报销费用 ",bed:"name为床位名 roomId为床位所在的宿舍号 receiptId为押金收据单号 isInUse代表床位是否已被占用，应填写“是”或“否” "}},{id:4,name:"财务管理员",item:[_("缴费统计表","1",e.jsx(V,{})),_("催收信","2",e.jsx(V,{})),_("宿舍情况查询","3",e.jsx(V,{}))],routers:[{route:"/paylist"},{route:"/collectmsg"},{route:"/roomchexk"}]},{id:5},{id:6,name:"外部单位入住办理员",item:[_("入住申请审核","1",e.jsx(V,{}))],routers:[{route:"/checkin"}]}];function Pt(){const[n,y]=o.useState(!1),[b,w]=o.useState(0),[s,I]=o.useState(null),[v,L]=o.useState(""),[m,A]=o.useState([]),[P,l]=o.useState([]),[f,i]=o.useState(0),[d,u]=o.useState(""),[x,h]=o.useState(!1),[J,G]=o.useState(""),[D,N]=o.useState({}),[B,z]=o.useState([]),[Se,Ue]=o.useState([]),[S,se]=o.useState({}),[De,Q]=o.useState([]),[Ae,Pe]=o.useState(""),[Ee,He]=o.useState(null),[Ge,ye]=o.useState(!1);Ke(),o.useEffect(()=>{ge.defaults.baseURL="https://apartment-server.wangminan.me",ge.get("/api/auth/hello")},[]);const oe=[{title:"Name",dataIndex:"name",key:"name"},{title:"Position",dataIndex:"position",key:"position"},{title:"Location",dataIndex:"location",key:"location"},{title:"Action",key:"action",render:(r,t,c)=>e.jsxs(Z,{size:"middle",children:[e.jsx(R,{type:"primary",onClick:()=>we(c,t,"apart"),children:"修改此条目"}),e.jsxs(R,{type:"primary",onClick:()=>ve(c),children:["删除",t.name]})]})}];function de(r){z(()=>{let t=[];for(let c=0;c<r.length-1;c++)t.push(r[c].dataIndex);return t}),z(t=>t)}function Be(r){se(()=>(S[r.target.id]=r.target.value,S))}function we(r,t,c){Pe(()=>c),N(t),h(!0),G(()=>"修改第"+(r+1)+"条"),z(O=>(N(T=>(Ue(()=>{let j=[];for(let X=0;X<O.length;X++)j.push(e.jsxs("div",{children:[e.jsx("p",{children:O[X]}),e.jsx(ne,{id:O[X],onChange:Be,defaultValue:T[O[X]]})]},te())),se(Y=>(Y[O[X]]=T[O[X]],Y));return j}),T)),O))}function Oe(r){se(t=>(t[r.target.id]=r.target.value,t))}function M(r){Pe(()=>r),G(()=>"新增"+r+"条目"),z(t=>(N(c=>(Ue(()=>{let O=[];for(let T=0;T<t.length;T++)t[T]==="receiptId"||t[T]==="isInUse"||(t[T]==="location"?O.push(e.jsxs("div",{children:[e.jsx("p",{children:t[T]}),e.jsx(ne,{id:t[T],onChange:Oe,defaultValue:"请输入合法经纬度,以英文逗号分隔"})]},te())):O.push(e.jsxs("div",{children:[e.jsx("p",{children:t[T]}),e.jsx(ne,{id:t[T],onChange:Oe,defaultValue:""})]},te())));return O}),c)),t))}function $(){let r=[];return se(t=>(r=t.location.split(","),r.length!=2?(alert("Location格式不正确！"),!1):(t.lon0=r[0],t.lon1=r[1],t))),!0}function q(){$(),F({method:"POST",url:"/api/management/apartment",data:{foremanAdminId:b,name:S.name,position:S.position,positionLongitude:S.lon1,positionLatitude:S.lon0,status:0}}).then(r=>{const{code:t}=r.data;if(t===2e3)g(1,100),alert("增加已完成,请刷新页面以查看最新结果");else{const{msg:c}=r.data;alert(c)}})}function Ce(r,t){$(),Q(c=>(F({method:"PUT",url:`/api/management/apartment/${c[r]}`,data:{foremanAdminId:b,name:S.name,position:S.position,positionLongitude:S.lon1,positionLatitude:S.lon0,status:t.status}}).then(O=>{const{code:T}=O.data;if(T===2e3)g(1,100),alert("修改已完成，请刷新以查看修改结果"),h(!1);else{const{msg:j}=O.data;alert(j),h(!1)}}),c))}function ve(r){Q(t=>{F({method:"DELETE",url:`/api/management/apartment/${t[r]}`}).then(c=>{const{code:O}=c.data;if(O===2e3)g(1,100),alert("删除已完成,请刷新页面以查看最新结果");else{const{msg:T}=c.data;alert(T)}})})}function g(r,t){F({method:"GET",url:`/api/management/apartment?pageNum=${r}&pageSize=${t}`}).then(c=>{const{code:O,msg:T}=c.data,{list:j,total:X}=c.data.result;if(O===2e3){u("公寓列表"),i(Math.ceil(X/t)),A(oe),de(oe),Q(a=>(a=[],a));let Y=[];for(let a=0;a<j.length;a++){Q(ee=>(ee.push(j[a].id),ee));let p={};p.key=te(),p.index=a,p.name=j[a].name,p.position=j[a].position,p.location=j[a].location,Y.push(p)}l(Y),ye(()=>(le.publish("tablereturned",!0),!0))}else alert(T)})}const ae=[{title:"宿舍号",dataIndex:"name",key:"name"},{title:"性别",dataIndex:"sex",key:"sex"},{title:"用途",dataIndex:"usage",key:"usage"},{title:"房间规格",dataIndex:"type",key:"type"},{title:"干部房",dataIndex:"isForCadre",key:"isForCadre"},{title:"保留间",dataIndex:"isReserved",key:"isReserved"},{title:"房间总价",dataIndex:"totalFee",key:"totalFee"},{title:"自理部分",dataIndex:"selfPayFee",key:"selfPayFee"},{title:"单位报销",dataIndex:"refundFee",key:"refundFee"},{title:"Action",key:"action",render:(r,t,c)=>e.jsxs(Z,{size:"middle",children:[e.jsx(R,{type:"primary",onClick:()=>we(c,t,"room"),children:"修改此条目"}),e.jsxs(R,{type:"primary",onClick:()=>et(c),children:["删除",t.name]})]})}];function C(){let r=!0;return se(t=>(t.sex==="man"||t.sex==="男"?t.sex=0:t.sex==="woman"||t.sex==="女"?t.sex=1:(alert("性别格式非法"),r=!1),t.isForCadre==="是"?t.isForCadre=1:t.isForCadre==="否"?t.isForCadre=0:(alert("干部房状态格式非法"),r=!1),t.isReserved==="是"?t.isReserved=1:t.isReserved==="否"?t.isReserved=0:(alert("保留间状态格式非法"),r=!1),t.type==="单人间"?t.type=1:t.type==="双人间"?t.type=2:t.type=parseInt(t.type.substring(0,t.type.indexOf("人"))),parseInt(t.totalFee)!==parseInt(t.selfPayFee)+parseInt(t.refundFee)&&(alert("总价不等于单位报销部分和个人自理部分之和"),console.log("总"+t.totalFee+"B"+t.refundFee+"S"+t.selfPayFee),r=!1),t)),r}function k(){C()&&F({method:"POST",url:"/api/management/room",data:{apartmentId:1,name:S.name,sex:S.sex,usage:S.usage,isForCadre:S.isForCadre,isReserved:S.isReserved,type:S.type,totalFee:S.totalFee,selfPayFee:S.selfPayFee,refundFee:S.refundFee}}).then(r=>{const{code:t}=r.data;if(t===2e3)Re(1,100),alert("增加已完成,请刷新页面以查看最新结果");else{const{msg:c}=r.data;alert(c)}})}function Ze(r){C()&&Q(t=>(F({method:"PUT",url:`/api/management/room/${t[r]}`,data:{apartmentId:1,name:S.name,sex:S.sex,usage:S.usage,isForCadre:S.isForCadre,isReserved:S.isReserved,type:S.type,totalFee:S.totalFee,selfPayFee:S.selfPayFee,refundFee:S.refundFee}}).then(c=>{const{code:O}=c.data;if(O===2e3)Re(1,100),alert("修改已完成，请刷新以查看修改结果"),h(!1);else{const{msg:T}=c.data;alert(T),h(!1)}}),t))}function et(r){Q(t=>{F({method:"DELETE",url:`/api/management/room/${t[r]}`}).then(c=>{const{code:O}=c.data;if(O===2e3)Re(1,100),alert("删除已完成,请刷新页面以查看最新结果");else{const{msg:T}=c.data;alert(T)}})})}function Re(r,t){F.get("/api/management/room",{params:{pageNum:r,pageSize:t,apartmentId:1,query:"",isForCadre:"",type:""}}).then(c=>{const{code:O,msg:T}=c.data,{list:j,total:X}=c.data.result;if(O===2e3){u("房间列表"),i(Math.ceil(X/t)),i(a=>(le.publish("tablepage",a),a)),A(ae),de(ae),Q(a=>(a=[],a));let Y=[];for(let a=0;a<j.length;a++){Q(ee=>(ee.push(j[a].id),ee));let p={};p.key=te(),p.index=a,p.name=j[a].name,j[a].sex===0?p.sex="man":j[a].sex===1&&(p.sex="woman"),p.usage=j[a].usage,j[a].type===1?p.type="单人间":j[a].type===2?p.type="双人间":p.type=j[a].type+"人间",j[a].isForCadre?p.isForCadre="是":p.isForCadre="否",j[a].isReserved?p.isReserved="是":p.isReserved="否",p.totalFee=j[a].totalFee,p.selfPayFee=j[a].selfPayFee,p.refundFee=j[a].refundFee,Y.push(p)}l(Y),ye(()=>(le.publish("tablereturned",!0),!0))}else alert(T)})}const Qe=[{title:"床位ID",dataIndex:"id",key:"id"},{title:"床位名",dataIndex:"name",key:"name"},{title:"所属房间的id",dataIndex:"roomId",key:"roomId"},{title:"押金收据单号",dataIndex:"receiptId",key:"receiptId"},{title:"床位使用情况",dataIndex:"isInUse",key:"isInUse"},{title:"Action",key:"action",render:(r,t,c)=>e.jsxs(Z,{size:"middle",children:[e.jsx(R,{type:"primary",onClick:()=>we(c,t,"bed"),children:"修改此条目"}),e.jsxs(R,{type:"primary",onClick:()=>at(c),children:["删除",t.name]})]})}];function tt(){let r=!0;return se(t=>(t.isInUse==="是"?t.isInUse=1:t.isInUse==="否"?t.isInUse=0:(alert("床位使用情况格式非法"),r=!1),t)),r}function nt(){F({method:"POST",url:"/api/management/bed",data:{name:S.name,roomId:S.roomId}}).then(r=>{const{code:t}=r.data;if(t===2e3)Fe(1,100),alert("增加已完成,请刷新页面以查看最新结果");else{const{msg:c}=r.data;alert(c)}})}function st(r){tt()&&Q(t=>(F({method:"PUT",url:`/api/management/bed/${t[r]}`,data:{name:S.name,roomId:S.roomId,receiptId:S.receiptId,isInUse:S.isInUse}}).then(c=>{const{code:O}=c.data;if(O===2e3)Fe(1,100),alert("修改已完成，请刷新以查看修改结果"),h(!1);else{const{msg:T}=c.data;alert(T),h(!1)}}),t))}function at(r){Q(t=>{F({method:"DELETE",url:`/api/management/bed/${t[r]}`}).then(c=>{const{code:O}=c.data;if(O===2e3)Fe(1,100),alert("删除已完成,请刷新页面以查看最新结果");else{const{msg:T}=c.data;alert(T)}})})}function Fe(r,t){F.get("/api/management/bed",{params:{pageNum:r,pageSize:t,apartmentId:"",query:"",roomId:"",isInUse:""}}).then(c=>{const{code:O,msg:T}=c.data,{list:j,total:X}=c.data.result;if(O===2e3){u("床位列表"),i(Math.ceil(X/t)),i(a=>(le.publish("tablepage",a),a)),A(Qe),de(Qe),Q(a=>(a=[],a));let Y=[];for(let a=0;a<j.length;a++){Q(ee=>(ee.push(j[a].id),ee));let p={};p.key=te(),p.index=a,p.id=j[a].id,p.name=j[a].name,p.roomId=j[a].roomId,p.receiptId=j[a].receiptId,j[a].isInUse===1?p.isInUse="是":p.isInUse="否",Y.push(p)}l(Y),ye(()=>(le.publish("tablereturned",!0),!0))}else alert(T)})}const Je=[{title:"支票ID",dataIndex:"chequeId",key:"chequeId"},{title:"公寓ID",dataIndex:"departmentId",key:"departmentId"},{title:"是否已支付",dataIndex:"hasPaid",key:"hasPaid"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"支付时间",dataIndex:"payTime",key:"payTime"},{title:"金额",dataIndex:"price",key:"price"}];function it(r,t){F.get("/api/finance/center/withhold",{params:{pageNum:r,pageSize:t}}).then(c=>{const{code:O,msg:T}=c.data,{list:j,total:X}=c.data.result;if(O===2e3){u("外部单位代扣表"),A(Je),de(Je),Q(a=>(a=[],a));let Y=[];for(let a=0;a<j.length;a++){Q(ee=>(ee.push(j[a].id),ee));let p={};p.key=te(),p.index=a,p.id=j[a].id,p.chequeId=j[a].chequeId,p.departmentId=j[a].departmentId,j[a].hasPaid===1?p.hasPaid="是":p.hasPaid="否",p.createTime=j[a].createTime,p.payTime=j[a].payTime,p.price=j[a].price,Y.push(p)}l(Y),ye(()=>(le.publish("tablereturned",!0),!0))}else alert(T)})}function rt(r,t){y(c=>!0),w(r),L(t.id),I(t.name)}function lt(){window.localStorage.removeItem("token"),y(!1)}return n?e.jsxs("div",{children:[e.jsx(Tt,{lognum:b,userid:v,usermsg:s,textitem:At,columns:m,tabledata:P,tablepage:f,tabletitle:d,logOut:lt,getApart:g,getRoom:Re,getBed:Fe,getOutPay:it,openAddDrawer:M,addButtons:Ee,tableitems:Se,apartAdd:q,roomAdd:k,bedAdd:nt}),e.jsx(Ut,{type:Ae,title:J,placement:"bottom",onClose:()=>h(!1),open:x,tableitems:Se,records:D,apartUpdate:Ce,roomUpdate:Ze,bedUpdate:st})]}):e.jsx("div",{className:"login-box",children:e.jsx("div",{className:"glass",children:e.jsxs("div",{className:"innerlogin",children:[e.jsx("p",{children:"公寓员工管理系统"}),e.jsx("img",{src:bt}),e.jsxs(ie,{children:[e.jsx(E,{path:"/login",element:e.jsx(yt,{login:rt})}),e.jsx(E,{path:"/register",element:e.jsx(It,{})}),e.jsx(E,{path:"*",element:e.jsx(re,{to:"/login"})})]})]})})})}const Me="user_key",Ot={saveUser(n){Ne.set(Me,n)},getUser(){return Ne.get(Me)||{}},removeUser(){Ne.remove(Me)}};Ot.getUser();ot.createRoot(document.getElementById("root")).render(e.jsx(dt,{children:e.jsx(Pt,{})}));
