import{r as o,j as e,R as Xe}from"./react-2ce75adb.js";import{c as ot}from"./react-dom-16e2f971.js";import{B as dt}from"./react-router-dom-93ff5a9d.js";import{a as be}from"./axios-4a70c6fc.js";import{q as ct}from"./qs-88f287ae.js";import{J as ut}from"./js-encrypt-af0330d8.js";import{I as ae,T as We,B as R,M as mt,a as Ze,S as Ne,b as Z,c as Ye,d as pt,e as ht,D as oe,R as N,f as Ie,C as S,g as xt,L as W,h as me,H as pe,i as he,j as Te}from"./antd-a23284d1.js";import{U as et,y as ft,z as Ke,m as Ge,A as V}from"./@ant-design-2bd79a7c.js";import{u as He,a as de,b as B,N as ce}from"./react-router-e1c202a2.js";import{P as ue}from"./pubsub-js-164616ad.js";import{v as ee}from"./uuid-a960c1f4.js";import{s as Me}from"./store-502a59ff.js";import"./call-bind-892c8155.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./scheduler-765c72db.js";import"./@remix-run-93d98c9a.js";import"./side-channel-b75e8576.js";import"./object-inspect-13342da8.js";import"./rc-util-68f98a54.js";import"./@babel-5495bcd4.js";import"./react-is-e8e5dbb3.js";import"./classnames-776d2d10.js";import"./rc-resize-observer-246dcd40.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./rc-motion-4ce3f50c.js";import"./rc-tabs-ad7b1b1e.js";import"./rc-dropdown-1e64d148.js";import"./@rc-component-1b94871b.js";import"./rc-menu-84eed2cd.js";import"./rc-overflow-cdd01579.js";import"./rc-select-47a8e25d.js";import"./rc-virtual-list-0be01e70.js";import"./rc-drawer-1676bf83.js";import"./rc-field-form-aa8598a5.js";import"./async-validator-7f96df71.js";import"./rc-dialog-e8c9bc58.js";import"./rc-table-2527d422.js";import"./throttle-debounce-87e7e444.js";import"./rc-checkbox-84dae2ea.js";import"./rc-tree-ed5c26ac.js";import"./@ctrl-fb5a5473.js";import"./rc-pagination-8db2162e.js";import"./rc-picker-db6157cb.js";import"./rc-tooltip-89186171.js";import"./rc-input-217e51a6.js";import"./rc-textarea-a7da98a1.js";import"./@emotion-c0b5c018.js";import"./stylis-fad5b415.js";(function(){const j=document.createElement("link").relList;if(j&&j.supports&&j.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))k(s);new MutationObserver(s=>{for(const w of s)if(w.type==="childList")for(const T of w.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&k(T)}).observe(document,{childList:!0,subtree:!0});function C(s){const w={};return s.integrity&&(w.integrity=s.integrity),s.referrerPolicy&&(w.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?w.credentials="include":s.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function k(s){if(s.ep)return;s.ep=!0;const w=C(s);fetch(s.href,w)}})();const F=be.create({baseURL:"https://apartment-server.wangminan.me",paramsSerializer:n=>ct.stringify(n,{arrayFormat:"brackets"})});F.interceptors.request.use(n=>(window.localStorage.getItem("token")!==void 0&&(n.headers.Authorization="Bearer "+window.localStorage.getItem("token")),n),n=>Promise.reject(n));F.interceptors.response.use(n=>(n!==null&&n.data!==null&&n.data.code!==null&&(n.data.code===4012||n.data.code===4010||n.data.code===4030)&&(window.localStorage.removeItem("token"),setTimeout(()=>{window.location.href="/login"},3e3)),n),n=>Promise.reject(n));const jt=`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA5vwYRBKySNSl/60qRqcD
lDVcNP9j2UyB7yalGI9MtlBEZ16pEiR08TuZjUL00go5LEb6z+ghVlp6UOsWR6i3
r7Q+FleKHG2yStqqaWx+11OQzOjffXQwqb1t/0bq/tzy04KBinSaB/yqnMc0yO8n
rZx8OtUX5rMcM7BjvpFOdnCSFUAOOfKRirfT5RydyGeLPOnBTwJIwpygGu20++UX
MxARO1aAJeUXeI+9g+XcsAi1EKbI2YdjWJ8PQnBC9+lsDRS3w8uKqUOZdYu/FxAy
bEjQ+YOXzfu2PB9+BdilkztV/yuF6hfk7MpGdA2JoBsJlljSYWH1mUE+e9mnUyHi
/wIDAQAB`;function gt(n){const j=new ut;return j.setPublicKey(jt),j.encrypt(n)}function yt(n){const j="13777864454",C="root",[k,s]=o.useState(j),[w,T]=o.useState(C),[D,c]=o.useState(!1);function P(I){s(()=>I.target.value)}function A(I){T(()=>I.target.value)}function l(){c(!0),F({method:"POST",url:"/api/auth/login/password",data:{username:k,password:gt(w)}}).then(I=>{const{code:a,result:d}=I.data;if(a===2e3)if(window.localStorage.setItem("token",d.token),window.localStorage.setItem("role",d.role),d.user)d.user,n.login(d.role,d.user);else{const p=d.admin;window.localStorage.setItem("user.id",p.id),window.localStorage.setItem("user.name",p.name),window.localStorage.setItem("user.loginAccountId",p.loginAccountId),window.localStorage.setItem("user.email",p.email),n.login(d.role,d.admin)}else{const{msg:p}=I.data;T(""),alert(p)}c(!1)})}return e.jsxs("div",{children:[e.jsx(ae,{value:k,onChange:P,placeholder:"Enter your username",prefix:e.jsx(et,{className:"site-form-item-icon"}),suffix:e.jsx(We,{title:"Extra information",children:e.jsx(ft,{style:{color:"rgba(0,0,0,.45)"}})})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(ae.Password,{value:w,onChange:A,placeholder:"input password",iconRender:I=>I?e.jsx(Ke,{}):e.jsx(Ge,{})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(R,{size:"large",type:"primary",loading:D,onClick:l,children:"Login"})]})}function It(){const[n,j]=o.useState(""),[C,k]=o.useState(""),[s,w]=o.useState(""),[T,D]=o.useState("");function c(a){j(()=>a.target.value)}function P(a,d){D(d!==""&&a!==d?()=>"error":()=>"")}function A(a){k(()=>a.target.value),P(a.target.value,s)}function l(a){w(()=>a.target.value),P(C,a.target.value)}function I(a){C!==s&&alert("")}return e.jsxs("div",{children:[e.jsx(ae,{onChange:c,placeholder:"default size",prefix:e.jsx(et,{})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(ae.Password,{onChange:A,placeholder:"input password",iconRender:a=>a?e.jsx(Ke,{}):e.jsx(Ge,{})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(ae.Password,{status:T,onChange:l,placeholder:"password again",iconRender:a=>a?e.jsx(Ke,{}):e.jsx(Ge,{})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(R,{size:"large",type:"primary",onClick:I,children:"SignUP"})]})}const bt=""+new URL("apartment-d819f74c.svg",import.meta.url).href;function xe(n){const{routers:j}=n,C=He();function k(s){C("/home"+j[parseInt(s.key,10)-1].route,{replace:!0})}return e.jsx("div",{children:e.jsx("div",{children:e.jsx(mt,{mode:n.mode,theme:n.theme,items:n.textitem,onClick:k})})})}function fe(n){return e.jsx(We,{placement:"right",title:"先生/女士",children:e.jsxs("span",{children:["欢迎您，",n.job," ",n.usermsg]})})}function St(n){const{tableitems:j,openAddDrawer:C,tabletype:k,addMsg:s,addfun:w}=n,[T,D]=o.useState(!1),[c,P]=o.useState(!1),[A,l]=o.useState("请在下方补全需要添加的条目 "),I=()=>{l(p=>p+s),C(),D(!0)},a=()=>{P(!0),w(),P(!1)},d=()=>{D(!1)};return e.jsxs("div",{children:[e.jsx(R,{type:"primary",onClick:I,children:"增加条目"}),e.jsxs(Ze,{title:k,open:T,onOk:a,okText:"提交",confirmLoading:c,onCancel:d,cancelText:"关闭",children:[e.jsx("p",{children:A}),j]})]})}function Ue(n){const{checkonly:j}=n,{tableitems:C,openAddDrawer:k,addMsg:s,addfun:w}=n,{getApart:T,getRoom:D,getBed:c,getOutPay:P}=n;let{tabletype:A,columns:l,tabledata:I,tablepage:a,tabletitle:d}=n;const[p,y]=o.useState(!1);ue.subscribe("tablereturned",(H,E)=>{y(()=>E)});const[,g]=Xe.useState(),J=Xe.useCallback(()=>g({}),[]);return o.useEffect(()=>{A==="apart"?(y(!1),T(1,100),J()):A==="room"?(y(!1),D(1,100),J()):A==="bed"?(y(!1),c(1,100)):A==="outpay"&&(y(!1),P(1,100))},[A]),p?j?e.jsx("div",{children:e.jsxs(Z,{direction:"vertical",size:16,children:[e.jsx("h2",{children:d}),e.jsx(Ye,{columns:l,dataSource:I,pagination:!1})]})}):(ue.subscribe("tablepage",(H,E)=>{a=E}),e.jsx("div",{children:e.jsxs(Z,{direction:"vertical",size:16,children:[e.jsx("h2",{children:d}),e.jsx(St,{openAddDrawer:k,tableitems:C,tabletype:A,addMsg:s,addfun:w}),e.jsx(Ye,{columns:l,dataSource:I,pagination:!1})]})})):e.jsx("div",{children:e.jsx(Ne,{})})}function wt(n){const{type:j,transdata:C,send:k}=n,[s,w]=o.useState([]),[T,D]=o.useState([]),[c,P]=o.useState("");function A(){let p=[];for(let y=0;y<s.length;y++)for(let g=0;g<C.length;g++)s[y]===C[g].key&&p.push(C[g].id);k(p,c,j),P("")}function l(p){P(p.target.value)}const I=(p,y,g)=>{w(p)},a=(p,y)=>{D([...p,...y])},d=(p,y)=>{};return e.jsxs("div",{className:"transferbox",children:[e.jsx("div",{children:e.jsx(pt,{dataSource:C,titles:["用户列表","发送给"],targetKeys:s,selectedKeys:T,onChange:I,onSelectChange:a,onScroll:d,render:p=>p.title})}),e.jsx(ht,{showCount:!0,maxLength:4096,style:{height:120,resize:"none"},onChange:l,placeholder:"请在此键入发信内容",value:c}),e.jsx(R,{onClick:A,children:"发送"})]})}function Ct(n){const[j,C]=o.useState([]),[k,s]=o.useState([]),{lognum:w,userid:T}=n;o.useEffect(()=>{be.defaults.baseURL="https://apartment-server.wangminan.me",c(1,100),P(1,100)},[]);function D(A,l,I){I==="user"?F({method:"POST",url:"/api/message/sender/send",data:{senderAdminId:T,receiverAdminIds:[],receiverUserIds:A,message:l}}).then(a=>{const{code:d,msg:p}=a.data;alert(d===2e3?"发送成功":p)}):I==="admin"?F({method:"POST",url:"/api/message/sender/send",data:{senderAdminId:T,receiverAdminIds:A,receiverUserIds:[],message:l}}).then(a=>{const{code:d,msg:p}=a.data;alert(d===2e3?"发送成功":p)}):alert("发送对象非法")}function c(A,l){F({method:"GET",url:`/api/user/user?pageNum=${A}&pageSize=${l}`}).then(I=>{const{code:a}=I.data;if(a===2e3){const{list:d}=I.data.result;let p=[];for(let y=0;y<d.length;y++){let g={};g.key=ee(),g.title=d[y].name,g.name=d[y].name,g.id=d[y].id,g.loginAccountId=d[y].loginAccountId,g.personalId=d[y].personalId,p.push(g)}C(p)}else{const{msg:d}=I.data;alert(d)}})}function P(A,l){F({method:"GET",url:`/api/user/admin?pageNum=${A}&pageSize=${l}`}).then(I=>{const{code:a}=I.data;if(a===2e3){const{list:d}=I.data.result;let p=[];for(let y=0;y<d.length;y++){let g={};g.key=ee(),g.title=d[y].name,g.name=d[y].name,g.id=d[y].id,g.loginAccountId=d[y].loginAccountId,g.departmentId=d[y].departmentId,g.email=d[y].email,p.push(g)}s(p)}else{const{msg:d}=I.data;alert(d)}})}return e.jsxs("div",{children:[e.jsx("h1",{children:"催收信发送"}),e.jsx("h3",{children:"发送给用户"}),e.jsx(wt,{type:"user",transdata:j,send:D})]})}function je(){o.useState(!1),o.useEffect(()=>{be.defaults.baseURL="https://apartment-server.wangminan.me",n(1,100)},[]);function n(j,C){F({method:"GET",url:`/api/message/receiver/inbox?pageNum=${j}&pageSize=${C}`}).then(k=>{const{code:s,result:w}=k.data;if(s!==2e3){const{msg:T}=k.data;alert(T)}})}return e.jsx("div",{})}const vt=[{title:"床位ID",dataIndex:"id",key:"id"},{title:"床位名",dataIndex:"name",key:"name"},{title:"所属房间的id",dataIndex:"roomId",key:"roomId"},{title:"押金收据单号",dataIndex:"receiptId",key:"receiptId"},{title:"床位使用情况",dataIndex:"isInUse",key:"isInUse"}];function $e(n){const{lognum:j}=n,[C,k]=o.useState(!1),[s,w]=o.useState([{id:"",userId:"",name:"",type:"",applicationStatus:"",depositStatus:"",paymentId:"",createTime:"",updateTime:"",fileUrl:""}]),[T,D]=o.useState([]),[c,P]=o.useState(0),[A,l]=o.useState(!1),[I,a]=o.useState(!1),[d,p]=o.useState(!1),[y,g]=o.useState(""),{tableitems:J,tabledata:H,tablepage:E,tabletitle:G}=n,{getBed:q}=n,[K,Ce]=o.useState(!0),[Pe,v]=o.useState(!1),re=He();o.useEffect(()=>{be.defaults.baseURL="https://apartment-server.wangminan.me",j===3?Q(1,100):j===2?Oe(1,100):ve(1,100)},[]);function Ae(){let z=[];w($=>{for(let M=0;M<$.length;M++)z.push(e.jsx(S,{className:"gutter-row",span:8,children:e.jsxs(xt,{title:$[M].type+"申请",bordered:!1,children:[e.jsx(L,{title:"ID",content:$[M].id}),e.jsx(L,{title:"Type",content:$[M].type}),e.jsx(L,{title:"ApplicationStatus",content:$[M].applicationStatus}),e.jsx("p",{}),e.jsx(R,{onClick:()=>Re(M),children:"查看"})]})}));return D(z),$})}function Q(z,$){F({method:"GET",url:`/api/application/apply/status/center?pageNum=${z}&pageSize=${$}`}).then(M=>{const{code:ne,result:le}=M.data;if(ne===2e3){const{list:u}=le;if(u.length===0){v(!0),PubSub.publish("cardsreturned",!0);return}let ie=[];for(let h=0;h<u.length;h++){let x={};x.key=ee(),x.id=u[h].id,x.userId=u[h].userId,x.paymentId=u[h].paymentId,u[h].type===0?x.type="入住":u[h].type===1?x.type="调宿":u[h].type===2&&(x.type="退宿"),x.fileUrl=u[h].fileUrl,x.applicationStatus=u[h].applicationStatus,u[h].depositStatus===0?x.depositStatus="未缴纳":u[h].depositStatus===1?x.depositStatus="已缴纳":u[h].depositStatus===2&&(x.depositStatus="已退回"),x.createTime=u[h].createTime,x.updateTime=u[h].updateTime,ie.push(x)}w(ie),Ae(),PubSub.publish("cardsreturned",!0)}else{const{msg:u}=M.data;alert(u)}})}function Oe(z,$){F({method:"GET",url:`/api/application/apply/status/center/checkin?pageNum=${z}&pageSize=${$}`}).then(M=>{const{code:ne,result:le}=M.data;if(ne===2e3){const{list:u}=le;if(u.length===0){v(!0),PubSub.publish("cardsreturned",!0);return}let ie=[];for(let h=0;h<u.length;h++){let x={};x.key=ee(),x.id=u[h].id,x.userId=u[h].userId,x.paymentId=u[h].paymentId,u[h].type===0?x.type="入住":u[h].type===1?x.type="调宿":u[h].type===2&&(x.type="退宿"),x.fileUrl=u[h].fileUrl,x.applicationStatus=u[h].applicationStatus,u[h].depositStatus===0?x.depositStatus="未缴纳":u[h].depositStatus===1?x.depositStatus="已缴纳":u[h].depositStatus===2&&(x.depositStatus="已退回"),x.createTime=u[h].createTime,x.updateTime=u[h].updateTime,ie.push(x)}w(ie),Ae(),PubSub.publish("cardsreturned",!0)}else{const{msg:u}=M.data;alert(u)}})}function ve(z,$){F({method:"GET",url:`/api/application/apply/status/department?pageNum=${z}&pageSize=${$}`}).then(M=>{const{code:ne,result:le}=M.data;if(ne===2e3){const{list:u}=le;if(u.length===0){v(!0),PubSub.publish("cardsreturned",!0);return}let ie=[];for(let h=0;h<u.length;h++){let x={};x.key=ee(),x.id=u[h].id,x.userId=u[h].userId,x.paymentId=u[h].paymentId,u[h].type===0?x.type="入住":u[h].type===1?x.type="调宿":u[h].type===2&&(x.type="退宿"),x.fileUrl=u[h].fileUrl,x.applicationStatus=u[h].applicationStatus,u[h].depositStatus===0?x.depositStatus="未缴纳":u[h].depositStatus===1?x.depositStatus="已缴纳":u[h].depositStatus===2&&(x.depositStatus="已退回"),x.createTime=u[h].createTime,x.updateTime=u[h].updateTime,ie.push(x)}w(ie),Ae(),PubSub.publish("cardsreturned",!0)}else{const{msg:u}=M.data;alert(u)}})}function ze(){a(!0)}function Qe(){p(!0),F({method:"POST",url:"/api/application/apply/status/center",data:{id:s[c].id,bedId:y}}).then(z=>{const{code:$}=z.data;if($===2e3)alert("分配完成"),p(!1),Q(1,100);else{const{msg:M}=z.data;alert(M),p(!1)}})}function Je(){a(!1)}function Se(z){g(z.target.value)}const Re=z=>{P(()=>z),k(!0)},te=()=>{k(!1)};function Fe(){F({method:"POST",url:"/api/application/apply/status/center/checkin",data:{id:s[c].id,pass:K}}).then(z=>{const{code:$}=z.data;if($===2e3)alert("审批完成"),Oe(1,100);else{const{msg:M}=z.data;alert(M)}})}function we(){F({method:"POST",url:"/api/application/apply/status/department",data:{id:s[c].id,pass:K}}).then(z=>{const{code:$}=z.data;if($===2e3)alert("审批完成"),ve(1,100);else{const{msg:M}=z.data;alert(M)}})}function ke(){Ce(!0),j===2?Fe():j===6&&we()}function Le(){Ce(!1),j===2?Fe():j===6&&we()}function De(){re("/home/welcome")}if(PubSub.subscribe("cardsreturned",(z,$)=>{l($)}),A){if(Pe===!0)return e.jsxs("div",{children:[e.jsx(oe,{orientation:"middle",children:"申请页面"}),e.jsx("p",{children:"暂时没有新的申请，休息一下吧"}),e.jsx(R,{onClick:De,children:"刷新"})]});if(j===3)return e.jsxs("div",{children:[e.jsx(oe,{orientation:"middle",children:"申请页面"}),e.jsx(N,{gutter:[16,20],children:T}),e.jsxs(Ie,{width:640,placement:"right",closable:!1,onClose:te,open:C,children:[e.jsx("p",{className:"site-description-item-profile-p",style:{marginBottom:24},children:"申请表"}),e.jsx("br",{}),e.jsxs(N,{children:[e.jsx(S,{span:12,children:e.jsx(L,{title:"ID",content:s[c].id})}),e.jsx(S,{span:12,children:e.jsx(L,{title:"UserID",content:s[c].userId})})]}),e.jsxs(N,{children:[e.jsx(S,{span:12,children:e.jsx(L,{title:"Type",content:s[c].type})}),e.jsx(S,{span:12,children:e.jsx(L,{title:"ApplicationStatus",content:s[c].applicationStatus})})]}),e.jsxs(N,{children:[e.jsx(S,{span:24,children:e.jsx(L,{title:"DepositStatus",content:s[c].depositStatus})}),e.jsx(S,{span:24,children:e.jsx(L,{title:"PaymentId",content:s[c].paymentId})})]}),e.jsxs(N,{children:[e.jsx(S,{span:24,children:e.jsx(L,{title:"createTime",content:s[c].createTime})}),e.jsx(S,{span:24,children:e.jsx(L,{title:"updateTime",content:s[c].updateTime})})]}),e.jsx(N,{children:e.jsx(S,{span:24,children:e.jsx("a",{href:s[c].fileUrl,children:"申请详情"})})}),e.jsx(oe,{}),e.jsx(R,{onClick:te,children:"Back"}),e.jsx(R,{type:"primary",onClick:ze,children:"分配床位"})]}),e.jsxs(Ze,{title:"Title",open:I,onOk:Qe,okText:"提交",confirmLoading:d,onCancel:Je,cancelText:"关闭",children:[e.jsxs("p",{children:["请在此键入要分配给",s[c].userId,"号用户的床位"]}),e.jsx(ae,{onChange:Se}),e.jsx(Ue,{checkonly:!0,tableitems:J,getBed:q,tabletype:"bed",columns:vt,tabledata:H,tablepage:E,tabletitle:G})]})]});if(j===2)return e.jsxs("div",{children:[e.jsx(oe,{orientation:"middle",children:"申请页面"}),e.jsx(N,{gutter:[16,20],children:T}),e.jsxs(Ie,{width:640,placement:"right",closable:!1,onClose:te,open:C,children:[e.jsx("p",{className:"site-description-item-profile-p",style:{marginBottom:24},children:"申请表"}),e.jsx("br",{}),e.jsxs(N,{children:[e.jsx(S,{span:12,children:e.jsx(L,{title:"ID",content:s[c].id})}),e.jsx(S,{span:12,children:e.jsx(L,{title:"UserID",content:s[c].userId})})]}),e.jsxs(N,{children:[e.jsx(S,{span:12,children:e.jsx(L,{title:"Type",content:s[c].type})}),e.jsx(S,{span:12,children:e.jsx(L,{title:"ApplicationStatus",content:s[c].applicationStatus})})]}),e.jsxs(N,{children:[e.jsx(S,{span:24,children:e.jsx(L,{title:"DepositStatus",content:s[c].depositStatus})}),e.jsx(S,{span:24,children:e.jsx(L,{title:"PaymentId",content:s[c].paymentId})})]}),e.jsxs(N,{children:[e.jsx(S,{span:24,children:e.jsx(L,{title:"createTime",content:s[c].createTime})}),e.jsx(S,{span:24,children:e.jsx(L,{title:"updateTime",content:s[c].updateTime})})]}),e.jsx(N,{children:e.jsx(S,{span:24,children:e.jsx("a",{href:s[c].fileUrl,children:"申请详情"})})}),e.jsx(oe,{}),e.jsx(R,{onClick:te,children:"Back"}),e.jsx(R,{type:"primary",onClick:ke,children:"批准"}),e.jsx(R,{onClick:Le,children:"驳回"})]})]});if(j===6)return e.jsxs("div",{children:[e.jsx(oe,{orientation:"middle",children:"申请页面"}),e.jsx(N,{gutter:[16,20],children:T}),e.jsxs(Ie,{width:640,placement:"right",closable:!1,onClose:te,open:C,children:[e.jsx("p",{className:"site-description-item-profile-p",style:{marginBottom:24},children:"申请表"}),e.jsx("br",{}),e.jsxs(N,{children:[e.jsx(S,{span:12,children:e.jsx(L,{title:"ID",content:s[c].id})}),e.jsx(S,{span:12,children:e.jsx(L,{title:"UserID",content:s[c].userId})})]}),e.jsxs(N,{children:[e.jsx(S,{span:12,children:e.jsx(L,{title:"Type",content:s[c].type})}),e.jsx(S,{span:12,children:e.jsx(L,{title:"ApplicationStatus",content:s[c].applicationStatus})})]}),e.jsxs(N,{children:[e.jsx(S,{span:24,children:e.jsx(L,{title:"DepositStatus",content:s[c].depositStatus})}),e.jsx(S,{span:24,children:e.jsx(L,{title:"PaymentId",content:s[c].paymentId})})]}),e.jsxs(N,{children:[e.jsx(S,{span:24,children:e.jsx(L,{title:"createTime",content:s[c].createTime})}),e.jsx(S,{span:24,children:e.jsx(L,{title:"updateTime",content:s[c].updateTime})})]}),e.jsx(N,{children:e.jsx(S,{span:24,children:e.jsx("a",{href:s[c].fileUrl,children:"申请详情"})})}),e.jsx(oe,{}),e.jsx(R,{onClick:te,children:"Back"}),e.jsx(R,{type:"primary",onClick:ke,children:"批准"}),e.jsx(R,{onClick:Le,children:"驳回"})]})]})}else return e.jsxs("div",{children:[e.jsx(oe,{orientation:"middle",children:"申请页面"}),e.jsx(Ne,{})]})}const L=({title:n,content:j})=>e.jsxs("div",{className:"site-description-item-profile-wrapper",children:[e.jsxs("p",{className:"site-description-item-profile-p-label",children:[n,":"]}),j]});function kt(n){const[j,C]=o.useState(""),[k,s]=o.useState(!1),[w,T]=o.useState(""),[D,c]=o.useState(!1),{getOutPay:P}=n,{tabletype:A,columns:l,tabledata:I,tablepage:a,tabletitle:d,tableitems:p}=n;o.useState(!1),o.useEffect(()=>{be.defaults.baseURL="https://apartment-server.wangminan.me",P(1,100),y(),g()},[]);function y(){F({method:"GET",url:"/api/finance/center/withhold/download"}).then(E=>{const{code:G}=E.data;if(G===2e3){const{result:q}=E.data;C(q),s(!0)}else{const{msg:q}=E.data;alert(q)}})}function g(){F({method:"GET",url:"/api/finance/center/charge/download"}).then(E=>{const{code:G}=E.data;if(G===2e3){const{result:q}=E.data;T(q),c(!0)}else{const{msg:q}=E.data;alert(q)}})}function J(){window.open(j)}function H(){window.open(w)}return k&&D?e.jsxs("div",{children:[e.jsx(R,{onClick:J,children:"下载外部单位代扣表"}),e.jsx(Ue,{tableitems:p,checkonly:!0,tabletype:"outpay",getOutPay:P,columns:l,tabledata:I,tablepage:a,tabletitle:d}),e.jsx("br",{}),e.jsx(R,{onClick:H,children:"下载自收表"})]}):e.jsx("div",{children:e.jsx(Ne,{})})}const ge={textAlign:"center",minHeight:120,lineHeight:"120px",color:"#000",backgroundColor:"#eee"},ye={textAlign:"center",lineHeight:"120px"};function Tt(n){const{logOut:j}=n,{openAddDrawer:C,tableitems:k}=n,{apartAdd:s,roomAdd:w,bedAdd:T}=n,{getApart:D,getRoom:c,getBed:P,getOutPay:A}=n,{lognum:l,userid:I,textitem:a,usermsg:d,columns:p,tabledata:y,tablepage:g,tabletitle:J}=n,H=a[l].routers,[E,G]=o.useState(!1);function q(){j()}if(l===1)return e.jsx(Z,{direction:"vertical",style:{width:"100%"},size:[0,48],children:e.jsxs(W,{style:{minHeight:"100vh"},children:[e.jsx(me,{style:ye,collapsible:!0,collapsed:E,onCollapse:K=>G(K),children:e.jsx(xe,{mode:"inline",theme:"dark",textitem:a[l].item,routers:H})}),e.jsxs(W,{children:[e.jsx(pe,{children:e.jsxs(N,{children:[e.jsx(S,{span:12,style:{display:"flex",justifyContent:"start",alignItems:"center"},children:e.jsx(je,{})}),e.jsx(S,{span:12,style:{display:"flex",justifyContent:"end",alignItems:"center"},children:e.jsx(R,{onClick:q,children:"LogOut"})})]})}),e.jsx(he,{style:ge,children:e.jsxs(de,{children:[e.jsx(B,{path:"/home/welcome",element:e.jsx(fe,{job:a[l].name,usermsg:d})}),e.jsx(B,{path:"*",element:e.jsx(ce,{to:"/home/welcome"})})]})})]})]})});if(l===2)return e.jsx(Z,{direction:"vertical",style:{width:"100%"},size:[0,48],children:e.jsxs(W,{style:{minHeight:"100vh"},children:[e.jsx(me,{style:ye,collapsible:!0,collapsed:E,onCollapse:K=>G(K),children:e.jsx(xe,{mode:"inline",theme:"dark",textitem:a[l].item,routers:H})}),e.jsxs(W,{children:[e.jsx(pe,{children:e.jsxs(N,{children:[e.jsx(S,{span:12,style:{display:"flex",justifyContent:"start",alignItems:"center"},children:e.jsx(je,{})}),e.jsx(S,{span:12,style:{display:"flex",justifyContent:"end",alignItems:"center"},children:e.jsx(R,{onClick:q,children:"LogOut"})})]})}),e.jsx(he,{style:ge,children:e.jsxs(de,{children:[e.jsx(B,{path:"/home/welcome",element:e.jsx(fe,{job:a[l].name,usermsg:d})}),e.jsx(B,{path:"/home/checkin",element:e.jsx($e,{lognum:l})}),e.jsx(B,{path:"*",element:e.jsx(ce,{to:"/home/welcome"})})]})})]})]})});if(l===3)return e.jsx(Z,{direction:"vertical",style:{width:"100%"},size:[0,48],children:e.jsxs(W,{style:{minHeight:"100vh"},children:[e.jsx(me,{style:ye,collapsible:!0,collapsed:E,onCollapse:K=>G(K),children:e.jsx(xe,{mode:"inline",theme:"dark",textitem:a[l].item,routers:H})}),e.jsxs(W,{children:[e.jsx(pe,{children:e.jsxs(N,{children:[e.jsx(S,{span:12,style:{display:"flex",justifyContent:"start",alignItems:"center"},children:e.jsx(je,{})}),e.jsx(S,{span:12,style:{display:"flex",justifyContent:"end",alignItems:"center"},children:e.jsx(R,{onClick:q,children:"LogOut"})})]})}),e.jsx(he,{style:ge,children:e.jsxs(de,{children:[e.jsx(B,{path:"/home/welcome",element:e.jsx(fe,{job:a[l].name,usermsg:d})}),e.jsx(B,{path:"/home/promise",element:e.jsx($e,{lognum:l,tableitems:k,getBed:P,tabletype:"bed",columns:p,tabledata:y,tablepage:g,tabletitle:J})}),e.jsx(B,{path:"/home/apart",element:e.jsx(Ue,{tableitems:k,openAddDrawer:()=>C("apart"),addMsg:a[l].addmessages.apart,addfun:s,getApart:D,tabletype:"apart",columns:p,tabledata:y,tablepage:g,tabletitle:J})}),e.jsx(B,{path:"/home/room",element:e.jsx(Ue,{tableitems:k,openAddDrawer:()=>C("room"),addMsg:a[l].addmessages.room,addfun:w,getRoom:c,tabletype:"room",columns:p,tabledata:y,tablepage:g,tabletitle:J})}),e.jsx(B,{path:"/home/bed",element:e.jsx(Ue,{tableitems:k,openAddDrawer:()=>C("bed"),addMsg:a[l].addmessages.bed,addfun:T,getBed:P,tabletype:"bed",columns:p,tabledata:y,tablepage:g,tabletitle:J})}),e.jsx(B,{path:"*",element:e.jsx(ce,{to:"/home/welcome"})})]})})]})]})});if(l===4)return e.jsx(Z,{direction:"vertical",style:{width:"100%"},size:[0,48],children:e.jsxs(W,{style:{minHeight:"100vh"},children:[e.jsx(me,{style:ye,collapsible:!0,collapsed:E,onCollapse:K=>G(K),children:e.jsx(xe,{mode:"inline",theme:"dark",textitem:a[l].item,routers:H})}),e.jsxs(W,{children:[e.jsx(pe,{children:e.jsxs(N,{children:[e.jsx(S,{span:12,style:{display:"flex",justifyContent:"start",alignItems:"center"},children:e.jsx(je,{})}),e.jsx(S,{span:12,style:{display:"flex",justifyContent:"end",alignItems:"center"},children:e.jsx(R,{onClick:q,children:"LogOut"})})]})}),e.jsx(he,{style:ge,children:e.jsxs(de,{children:[e.jsx(B,{path:"/home/welcome",element:e.jsx(fe,{job:a[l].name,usermsg:d})}),e.jsx(B,{path:"/home/paylist",element:e.jsx(kt,{tableitems:k,getOutPay:A,tabletype:"bed",columns:p,tabledata:y,tablepage:g,tabletitle:J})}),e.jsx(B,{path:"/home/collectmsg",element:e.jsx(Ct,{lognum:l,userid:I})}),e.jsx(B,{path:"*",element:e.jsx(ce,{to:"/home/welcome"})})]})})]})]})});if(l===5)return e.jsx(Z,{direction:"vertical",style:{width:"100%"},size:[0,48],children:e.jsxs(W,{style:{minHeight:"100vh"},children:[e.jsx(me,{style:ye,collapsible:!0,collapsed:E,onCollapse:K=>G(K),children:e.jsx(xe,{mode:"inline",theme:"dark",textitem:a[l].item,routers:H})}),e.jsxs(W,{children:[e.jsx(pe,{children:e.jsxs(N,{children:[e.jsx(S,{span:12,style:{display:"flex",justifyContent:"start",alignItems:"center"},children:e.jsx(je,{})}),e.jsx(S,{span:12,style:{display:"flex",justifyContent:"end",alignItems:"center"},children:e.jsx(R,{onClick:q,children:"LogOut"})})]})}),e.jsx(he,{style:ge,children:e.jsxs(de,{children:[e.jsx(B,{path:"/home/welcome",element:e.jsx(fe,{job:a[l].name,usermsg:d})}),e.jsx(B,{path:"*",element:e.jsx(ce,{to:"/home/welcome"})})]})})]})]})});if(l===6)return e.jsx(Z,{direction:"vertical",style:{width:"100%"},size:[0,48],children:e.jsxs(W,{style:{minHeight:"100vh"},children:[e.jsx(me,{style:ye,collapsible:!0,collapsed:E,onCollapse:K=>G(K),children:e.jsx(xe,{mode:"inline",theme:"dark",textitem:a[l].item,routers:H})}),e.jsxs(W,{children:[e.jsx(pe,{children:e.jsxs(N,{children:[e.jsx(S,{span:12,style:{display:"flex",justifyContent:"start",alignItems:"center"},children:e.jsx(je,{})}),e.jsx(S,{span:12,style:{display:"flex",justifyContent:"end",alignItems:"center"},children:e.jsx(R,{onClick:q,children:"LogOut"})})]})}),e.jsx(he,{style:ge,children:e.jsxs(de,{children:[e.jsx(B,{path:"/home/welcome",element:e.jsx(fe,{job:a[l].name,usermsg:d})}),e.jsx(B,{path:"/home/checkin",element:e.jsx($e,{lognum:l})}),e.jsx(B,{path:"*",element:e.jsx(ce,{to:"/home/welcome"})})]})})]})]})});if(l===7)return e.jsx(Z,{direction:"vertical",style:{width:"100%"},size:[0,48],children:e.jsxs(W,{style:{minHeight:"100vh"},children:[e.jsx(me,{style:ye,collapsible:!0,collapsed:E,onCollapse:K=>G(K),children:e.jsx(xe,{mode:"inline",theme:"dark",textitem:a[l].item,routers:H})}),e.jsxs(W,{children:[e.jsx(pe,{children:e.jsxs(N,{children:[e.jsx(S,{span:12,style:{display:"flex",justifyContent:"start",alignItems:"center"},children:e.jsx(je,{})}),e.jsx(S,{span:12,style:{display:"flex",justifyContent:"end",alignItems:"center"},children:e.jsx(R,{onClick:q,children:"LogOut"})})]})}),e.jsx(he,{style:ge,children:e.jsxs(de,{children:[e.jsx(B,{path:"/home/welcome",element:e.jsx(fe,{job:a[l].name,usermsg:d})}),e.jsx(B,{path:"*",element:e.jsx(ce,{to:"/home/welcome"})})]})})]})]})})}function Ut(n){const{apartUpdate:j,roomUpdate:C,bedUpdate:k}=n,{type:s,title:w,placement:T,onClose:D,open:c,tableitems:P,records:A}=n,[l,I]=o.useState(!1),[a,d]=o.useState(0),[p,y]=o.useState({status:0});function g(){I(!0),j(A.index,p),I(!1)}function J(G){y(q=>(q.status=G.target.value,q)),d(G.target.value)}function H(){I(!0),C(A.index),I(!1)}function E(){I(!0),k(A.index),I(!1)}if(P.length===0)return e.jsx(Ie,{title:w,placement:T,onClose:D,open:c,children:e.jsx(Ne,{})});if(s==="apart")return e.jsxs(Ie,{title:w,placement:T,onClose:D,open:c,children:[P,"此公寓",e.jsxs(Te.Group,{onChange:J,value:a,children:[e.jsx(Te,{value:0,children:"正常使用"}),e.jsx(Te,{value:1,children:"启用中"}),e.jsx(Te,{value:2,children:"弃用中"}),e.jsx(Te,{value:3,children:"已弃用"})]}),e.jsx("br",{}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx(R,{type:"primary",loading:l,onClick:g,children:"修改"})})]});if(s==="room")return e.jsxs(Ie,{title:w,placement:T,onClose:D,open:c,children:[P,e.jsx("br",{}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx(R,{type:"primary",loading:l,onClick:H,children:"修改"})})]});if(s==="bed")return e.jsxs(Ie,{title:w,placement:T,onClose:D,open:c,children:[P,e.jsx("br",{}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx(R,{type:"primary",loading:l,onClick:E,children:"修改"})})]})}function _(n,j,C,k,s){return{key:j,icon:C,children:k,label:n,type:s}}const Pt=[{},{id:1,name:"超级管理员",item:[_("管理员账号管理","1",e.jsx(V,{})),_("外部单位管理","2",e.jsx(V,{})),_("公寓管理","3",e.jsx(V,{})),_("房间管理","4",e.jsx(V,{}))]},{id:2,name:"入住办理员",item:[_("入住申请审核","1",e.jsx(V,{})),_("床位编号录入","2",e.jsx(V,{})),_("人脸录入确认","3",e.jsx(V,{}))],routers:[{route:"/checkin"},{route:"/bedid"},{route:"/face"}]},{id:3,name:"宿舍调配员",item:[_("住/调宿申请","1",e.jsx(V,{})),_("公寓管理","2",e.jsx(V,{})),_("房间管理","3",e.jsx(V,{})),_("床位管理","4",e.jsx(V,{}))],routers:[{route:"/promise"},{route:"/apart"},{route:"/room"},{route:"/bed"}],addmessages:{apart:"name为公寓名 position为公寓地址 location为经纬度地址",room:"name为宿舍号 sex为性别，应填写“男”或“女” usage为宿舍用途 type为房间种类，应填写“n人间”，n为整数 isForCadre为干部房标识，应填写“是”或“否” isReserved代表此房间是否保留，应填写“是”或“否” totalFee为宿舍费用 selfPayFee为自费费用 refundFee为单位报销费用 ",bed:"name为床位名 roomId为床位所在的宿舍号 receiptId为押金收据单号 isInUse代表床位是否已被占用，应填写“是”或“否” "}},{id:4,name:"财务管理员",item:[_("缴费统计表","1",e.jsx(V,{})),_("催收信","2",e.jsx(V,{})),_("宿舍情况查询","3",e.jsx(V,{}))],routers:[{route:"/paylist"},{route:"/collectmsg"},{route:"/roomchexk"}]},{id:5},{id:6,name:"外部单位入住办理员",item:[_("入住申请审核","1",e.jsx(V,{}))],routers:[{route:"/checkin"}]}];function At(){const[n,j]=o.useState(!1),[C,k]=o.useState(0),[s,w]=o.useState(null),[T,D]=o.useState(""),[c,P]=o.useState([]),[A,l]=o.useState([]),[I,a]=o.useState(0),[d,p]=o.useState(""),[y,g]=o.useState(!1),[J,H]=o.useState(""),[E,G]=o.useState({}),[q,K]=o.useState([]),[Ce,Pe]=o.useState([]),[v,re]=o.useState({}),[Ae,Q]=o.useState([]),[Oe,ve]=o.useState(""),[ze,Qe]=o.useState(null),[Je,Se]=o.useState(!1);He(),o.useEffect(()=>{be.defaults.baseURL="https://apartment-server.wangminan.me",be.get("/api/auth/hello")},[]);const Re=[{title:"Name",dataIndex:"name",key:"name"},{title:"Position",dataIndex:"position",key:"position"},{title:"Location",dataIndex:"location",key:"location"},{title:"Action",key:"action",render:(r,t,m)=>e.jsxs(Z,{size:"middle",children:[e.jsx(R,{type:"primary",onClick:()=>we(m,t,"apart"),children:"修改此条目"}),e.jsxs(R,{type:"primary",onClick:()=>M(m),children:["删除",t.name]})]})}];function te(r){K(()=>{let t=[];for(let m=0;m<r.length-1;m++)t.push(r[m].dataIndex);return t}),K(t=>t)}function Fe(r){re(()=>(v[r.target.id]=r.target.value,v))}function we(r,t,m){ve(()=>m),G(t),g(!0),H(()=>"修改第"+(r+1)+"条"),K(O=>(G(U=>(Pe(()=>{let b=[];for(let X=0;X<O.length;X++)b.push(e.jsxs("div",{children:[e.jsx("p",{children:O[X]}),e.jsx(ae,{id:O[X],onChange:Fe,defaultValue:U[O[X]]})]},ee())),re(Y=>(Y[O[X]]=U[O[X]],Y));return b}),U)),O))}function ke(r){re(t=>(t[r.target.id]=r.target.value,t))}function Le(r){ve(()=>r),H(()=>"新增"+r+"条目"),K(t=>(G(m=>(Pe(()=>{let O=[];for(let U=0;U<t.length;U++)t[U]==="receiptId"||t[U]==="isInUse"||(t[U]==="location"?O.push(e.jsxs("div",{children:[e.jsx("p",{children:t[U]}),e.jsx(ae,{id:t[U],onChange:ke,defaultValue:"请输入合法经纬度,以英文逗号分隔"})]},ee())):O.push(e.jsxs("div",{children:[e.jsx("p",{children:t[U]}),e.jsx(ae,{id:t[U],onChange:ke,defaultValue:""})]},ee())));return O}),m)),t))}function De(){let r=[];return re(t=>(r=t.location.split(","),r.length!=2?(alert("Location格式不正确！"),!1):(t.lon0=r[0],t.lon1=r[1],t))),!0}function z(){De(),F({method:"POST",url:"/api/management/apartment",data:{foremanAdminId:C,name:v.name,position:v.position,positionLongitude:v.lon1,positionLatitude:v.lon0,status:0}}).then(r=>{const{code:t}=r.data;if(t===2e3)ne(1,100),alert("增加已完成,请刷新页面以查看最新结果");else{const{msg:m}=r.data;alert(m)}})}function $(r,t){De(),Q(m=>(F({method:"PUT",url:`/api/management/apartment/${m[r]}`,data:{foremanAdminId:C,name:v.name,position:v.position,positionLongitude:v.lon1,positionLatitude:v.lon0,status:t.status}}).then(O=>{const{code:U}=O.data;if(U===2e3)ne(1,100),alert("修改已完成，请刷新以查看修改结果"),g(!1);else{const{msg:b}=O.data;alert(b),g(!1)}}),m))}function M(r){Q(t=>{F({method:"DELETE",url:`/api/management/apartment/${t[r]}`}).then(m=>{const{code:O}=m.data;if(O===2e3)ne(1,100),alert("删除已完成,请刷新页面以查看最新结果");else{const{msg:U}=m.data;alert(U)}})})}function ne(r,t){F({method:"GET",url:`/api/management/apartment?pageNum=${r}&pageSize=${t}`}).then(m=>{const{code:O,msg:U}=m.data,{list:b,total:X}=m.data.result;if(O===2e3){p("公寓列表"),a(Math.ceil(X/t)),P(Re),te(Re),Q(i=>(i=[],i));let Y=[];for(let i=0;i<b.length;i++){Q(se=>(se.push(b[i].id),se));let f={};f.key=ee(),f.index=i,f.name=b[i].name,f.position=b[i].position,f.location=b[i].location,Y.push(f)}l(Y),Se(()=>(ue.publish("tablereturned",!0),!0))}else alert(U)})}const le=[{title:"宿舍号",dataIndex:"name",key:"name"},{title:"性别",dataIndex:"sex",key:"sex"},{title:"用途",dataIndex:"usage",key:"usage"},{title:"房间规格",dataIndex:"type",key:"type"},{title:"干部房",dataIndex:"isForCadre",key:"isForCadre"},{title:"保留间",dataIndex:"isReserved",key:"isReserved"},{title:"房间总价",dataIndex:"totalFee",key:"totalFee"},{title:"自理部分",dataIndex:"selfPayFee",key:"selfPayFee"},{title:"单位报销",dataIndex:"refundFee",key:"refundFee"},{title:"Action",key:"action",render:(r,t,m)=>e.jsxs(Z,{size:"middle",children:[e.jsx(R,{type:"primary",onClick:()=>we(m,t,"room"),children:"修改此条目"}),e.jsxs(R,{type:"primary",onClick:()=>x(m),children:["删除",t.name]})]})}];function u(){let r=!0;return re(t=>(t.sex==="man"||t.sex==="男"?t.sex=0:t.sex==="woman"||t.sex==="女"?t.sex=1:(alert("性别格式非法"),r=!1),t.isForCadre==="是"?t.isForCadre=1:t.isForCadre==="否"?t.isForCadre=0:(alert("干部房状态格式非法"),r=!1),t.isReserved==="是"?t.isReserved=1:t.isReserved==="否"?t.isReserved=0:(alert("保留间状态格式非法"),r=!1),t.type==="单人间"?t.type=1:t.type==="双人间"?t.type=2:t.type=parseInt(t.type.substring(0,t.type.indexOf("人"))),parseInt(t.totalFee)!==parseInt(t.selfPayFee)+parseInt(t.refundFee)&&(alert("总价不等于单位报销部分和个人自理部分之和"),console.log("总"+t.totalFee+"B"+t.refundFee+"S"+t.selfPayFee),r=!1),t)),r}function ie(){u()&&F({method:"POST",url:"/api/management/room",data:{apartmentId:1,name:v.name,sex:v.sex,usage:v.usage,isForCadre:v.isForCadre,isReserved:v.isReserved,type:v.type,totalFee:v.totalFee,selfPayFee:v.selfPayFee,refundFee:v.refundFee}}).then(r=>{const{code:t}=r.data;if(t===2e3)Ee(1,100),alert("增加已完成,请刷新页面以查看最新结果");else{const{msg:m}=r.data;alert(m)}})}function h(r){u()&&Q(t=>(F({method:"PUT",url:`/api/management/room/${t[r]}`,data:{apartmentId:1,name:v.name,sex:v.sex,usage:v.usage,isForCadre:v.isForCadre,isReserved:v.isReserved,type:v.type,totalFee:v.totalFee,selfPayFee:v.selfPayFee,refundFee:v.refundFee}}).then(m=>{const{code:O}=m.data;if(O===2e3)Ee(1,100),alert("修改已完成，请刷新以查看修改结果"),g(!1);else{const{msg:U}=m.data;alert(U),g(!1)}}),t))}function x(r){Q(t=>{F({method:"DELETE",url:`/api/management/room/${t[r]}`}).then(m=>{const{code:O}=m.data;if(O===2e3)Ee(1,100),alert("删除已完成,请刷新页面以查看最新结果");else{const{msg:U}=m.data;alert(U)}})})}function Ee(r,t){F.get("/api/management/room",{params:{pageNum:r,pageSize:t,apartmentId:1,query:"",isForCadre:"",type:""}}).then(m=>{const{code:O,msg:U}=m.data,{list:b,total:X}=m.data.result;if(O===2e3){p("房间列表"),a(Math.ceil(X/t)),a(i=>(ue.publish("tablepage",i),i)),P(le),te(le),Q(i=>(i=[],i));let Y=[];for(let i=0;i<b.length;i++){Q(se=>(se.push(b[i].id),se));let f={};f.key=ee(),f.index=i,f.name=b[i].name,b[i].sex===0?f.sex="man":b[i].sex===1&&(f.sex="woman"),f.usage=b[i].usage,b[i].type===1?f.type="单人间":b[i].type===2?f.type="双人间":f.type=b[i].type+"人间",b[i].isForCadre?f.isForCadre="是":f.isForCadre="否",b[i].isReserved?f.isReserved="是":f.isReserved="否",f.totalFee=b[i].totalFee,f.selfPayFee=b[i].selfPayFee,f.refundFee=b[i].refundFee,Y.push(f)}l(Y),Se(()=>(ue.publish("tablereturned",!0),!0))}else alert(U)})}const Ve=[{title:"床位ID",dataIndex:"id",key:"id"},{title:"床位名",dataIndex:"name",key:"name"},{title:"所属房间的id",dataIndex:"roomId",key:"roomId"},{title:"押金收据单号",dataIndex:"receiptId",key:"receiptId"},{title:"床位使用情况",dataIndex:"isInUse",key:"isInUse"},{title:"Action",key:"action",render:(r,t,m)=>e.jsxs(Z,{size:"middle",children:[e.jsx(R,{type:"primary",onClick:()=>we(m,t,"bed"),children:"修改此条目"}),e.jsxs(R,{type:"primary",onClick:()=>it(m),children:["删除",t.name]})]})}];function tt(){let r=!0;return re(t=>(t.isInUse==="是"?t.isInUse=1:t.isInUse==="否"?t.isInUse=0:(alert("床位使用情况格式非法"),r=!1),t)),r}function st(){F({method:"POST",url:"/api/management/bed",data:{name:v.name,roomId:v.roomId}}).then(r=>{const{code:t}=r.data;if(t===2e3)Be(1,100),alert("增加已完成,请刷新页面以查看最新结果");else{const{msg:m}=r.data;alert(m)}})}function nt(r){tt()&&Q(t=>(F({method:"PUT",url:`/api/management/bed/${t[r]}`,data:{name:v.name,roomId:v.roomId,receiptId:v.receiptId,isInUse:v.isInUse}}).then(m=>{const{code:O}=m.data;if(O===2e3)Be(1,100),alert("修改已完成，请刷新以查看修改结果"),g(!1);else{const{msg:U}=m.data;alert(U),g(!1)}}),t))}function it(r){Q(t=>{F({method:"DELETE",url:`/api/management/bed/${t[r]}`}).then(m=>{const{code:O}=m.data;if(O===2e3)Be(1,100),alert("删除已完成,请刷新页面以查看最新结果");else{const{msg:U}=m.data;alert(U)}})})}function Be(r,t){F.get("/api/management/bed",{params:{pageNum:r,pageSize:t,apartmentId:"",query:"",roomId:"",isInUse:""}}).then(m=>{const{code:O,msg:U}=m.data,{list:b,total:X}=m.data.result;if(O===2e3){p("床位列表"),a(Math.ceil(X/t)),a(i=>(ue.publish("tablepage",i),i)),P(Ve),te(Ve),Q(i=>(i=[],i));let Y=[];for(let i=0;i<b.length;i++){Q(se=>(se.push(b[i].id),se));let f={};f.key=ee(),f.index=i,f.id=b[i].id,f.name=b[i].name,f.roomId=b[i].roomId,f.receiptId=b[i].receiptId,b[i].isInUse===1?f.isInUse="是":f.isInUse="否",Y.push(f)}l(Y),Se(()=>(ue.publish("tablereturned",!0),!0))}else alert(U)})}const _e=[{title:"支票ID",dataIndex:"chequeId",key:"chequeId"},{title:"公寓ID",dataIndex:"departmentId",key:"departmentId"},{title:"是否已支付",dataIndex:"hasPaid",key:"hasPaid"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"支付时间",dataIndex:"payTime",key:"payTime"},{title:"金额",dataIndex:"price",key:"price"}];function at(r,t){F.get("/api/finance/center/withhold",{params:{pageNum:r,pageSize:t}}).then(m=>{const{code:O,msg:U}=m.data,{list:b,total:X}=m.data.result;if(O===2e3){p("外部单位代扣表"),P(_e),te(_e),Q(i=>(i=[],i));let Y=[];for(let i=0;i<b.length;i++){Q(se=>(se.push(b[i].id),se));let f={};f.key=ee(),f.index=i,f.id=b[i].id,f.chequeId=b[i].chequeId,f.departmentId=b[i].departmentId,b[i].hasPaid===1?f.hasPaid="是":f.hasPaid="否",f.createTime=b[i].createTime,f.payTime=b[i].payTime,f.price=b[i].price,Y.push(f)}l(Y),Se(()=>(ue.publish("tablereturned",!0),!0))}else alert(U)})}function rt(r,t){j(m=>!0),k(r),D(t.id),w(t.name)}function lt(){window.localStorage.removeItem("token"),j(!1)}return n?e.jsxs("div",{children:[e.jsx(Tt,{lognum:C,userid:T,usermsg:s,textitem:Pt,columns:c,tabledata:A,tablepage:I,tabletitle:d,logOut:lt,getApart:ne,getRoom:Ee,getBed:Be,getOutPay:at,openAddDrawer:Le,addButtons:ze,tableitems:Ce,apartAdd:z,roomAdd:ie,bedAdd:st}),e.jsx(Ut,{type:Oe,title:J,placement:"bottom",onClose:()=>g(!1),open:y,tableitems:Ce,records:E,apartUpdate:$,roomUpdate:h,bedUpdate:nt})]}):e.jsx("div",{className:"login-box",children:e.jsx("div",{className:"glass",children:e.jsxs("div",{className:"innerlogin",children:[e.jsx("p",{children:"公寓员工管理系统"}),e.jsx("img",{src:bt}),e.jsxs(de,{children:[e.jsx(B,{path:"/login",element:e.jsx(yt,{login:rt})}),e.jsx(B,{path:"/register",element:e.jsx(It,{})}),e.jsx(B,{path:"*",element:e.jsx(ce,{to:"/login"})})]})]})})})}const qe="user_key",Ot={saveUser(n){Me.set(qe,n)},getUser(){return Me.get(qe)||{}},removeUser(){Me.remove(qe)}};Ot.getUser();ot.createRoot(document.getElementById("root")).render(e.jsx(dt,{children:e.jsx(At,{})}));
