import{c as h}from"./classnames-4ba1ba1a.js";import{r as y,R as o}from"./react-4fd50329.js";import{a as Y,d as R,e as Z,_ as ne,b as ae,c as W,h as te}from"./@babel-5495bcd4.js";import{z as le,y as ue}from"./rc-util-12454e0c.js";function $(e){return!!(e.addonBefore||e.addonAfter)}function X(e){return!!(e.prefix||e.suffix||e.allowClear)}function p(e,n,s,i){if(s){var t=n;if(n.type==="click"){var r=e.cloneNode(!0);t=Object.create(n,{target:{value:r},currentTarget:{value:r}}),r.value="",s(t);return}if(i!==void 0){t=Object.create(n,{target:{value:e},currentTarget:{value:e}}),e.value=i,s(t);return}s(t)}}function re(e,n){if(e){e.focus(n);var s=n||{},i=s.cursor;if(i){var t=e.value.length;switch(i){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(t,t);break;default:e.setSelectionRange(0,t)}}}}function ee(e){return typeof e>"u"||e===null?"":String(e)}var ce=function(n){var s,i,t=n.inputElement,r=n.prefixCls,A=n.prefix,g=n.suffix,D=n.addonBefore,x=n.addonAfter,E=n.className,k=n.style,P=n.disabled,_=n.readOnly,j=n.focused,N=n.triggerFocus,d=n.allowClear,I=n.value,q=n.handleReset,f=n.hidden,l=n.classes,C=n.classNames,z=n.dataAttrs,v=n.styles,K=y.useRef(null),V=function(w){var S;(S=K.current)!==null&&S!==void 0&&S.contains(w.target)&&N?.()},G=function(){var w;if(!d)return null;var S=!P&&!_&&I,u="".concat(r,"-clear-icon"),a=ne(d)==="object"&&d!==null&&d!==void 0&&d.clearIcon?d.clearIcon:"âœ–";return o.createElement("span",{onClick:q,onMouseDown:function(F){return F.preventDefault()},className:h(u,(w={},R(w,"".concat(u,"-hidden"),!S),R(w,"".concat(u,"-has-suffix"),!!g),w)),role:"button",tabIndex:-1},a)},B=y.cloneElement(t,{value:I,hidden:f,className:h((s=t.props)===null||s===void 0?void 0:s.className,!X(n)&&!$(n)&&E)||null,style:Y(Y({},(i=t.props)===null||i===void 0?void 0:i.style),!X(n)&&!$(n)?k:{})});if(X(n)){var b,m="".concat(r,"-affix-wrapper"),c=h(m,(b={},R(b,"".concat(m,"-disabled"),P),R(b,"".concat(m,"-focused"),j),R(b,"".concat(m,"-readonly"),_),R(b,"".concat(m,"-input-with-clear-btn"),g&&d&&I),b),!$(n)&&E,l?.affixWrapper),M=(g||d)&&o.createElement("span",{className:h("".concat(r,"-suffix"),C?.suffix),style:v?.suffix},G(),g);B=o.createElement("span",Z({className:c,style:$(n)?void 0:k,hidden:!$(n)&&f,onClick:V},z?.affixWrapper,{ref:K}),A&&o.createElement("span",{className:h("".concat(r,"-prefix"),C?.prefix),style:v?.prefix},A),y.cloneElement(t,{value:I,hidden:null}),M)}if($(n)){var H="".concat(r,"-group"),T="".concat(H,"-addon"),J=h("".concat(r,"-wrapper"),H,l?.wrapper),Q=h("".concat(r,"-group-wrapper"),E,l?.group);return o.createElement("span",{className:Q,style:k,hidden:f},o.createElement("span",{className:J},D&&o.createElement("span",{className:T},D),y.cloneElement(B,{hidden:null}),x&&o.createElement("span",{className:T},x)))}return B},oe=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","classes","classNames","styles"],ve=y.forwardRef(function(e,n){var s=e.autoComplete,i=e.onChange,t=e.onFocus,r=e.onBlur,A=e.onPressEnter,g=e.onKeyDown,D=e.prefixCls,x=D===void 0?"rc-input":D,E=e.disabled,k=e.htmlSize,P=e.className,_=e.maxLength,j=e.suffix,N=e.showCount,d=e.type,I=d===void 0?"text":d,q=e.classes,f=e.classNames,l=e.styles,C=ae(e,oe),z=le(e.defaultValue,{value:e.value}),v=W(z,2),K=v[0],V=v[1],G=y.useState(!1),B=W(G,2),b=B[0],m=B[1],c=y.useRef(null),M=function(a){c.current&&re(c.current,a)};y.useImperativeHandle(n,function(){return{focus:M,blur:function(){var a;(a=c.current)===null||a===void 0||a.blur()},setSelectionRange:function(a,O,F){var L;(L=c.current)===null||L===void 0||L.setSelectionRange(a,O,F)},select:function(){var a;(a=c.current)===null||a===void 0||a.select()},input:c.current}}),y.useEffect(function(){m(function(u){return u&&E?!1:u})},[E]);var H=function(a){e.value===void 0&&V(a.target.value),c.current&&p(c.current,a,i)},T=function(a){A&&a.key==="Enter"&&A(a),g?.(a)},J=function(a){m(!0),t?.(a)},Q=function(a){m(!1),r?.(a)},U=function(a){V(""),M(),c.current&&p(c.current,a,i)},w=function(){var a=ue(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","classes","htmlSize","styles","classNames"]);return o.createElement("input",Z({autoComplete:s},a,{onChange:H,onFocus:J,onBlur:Q,onKeyDown:T,className:h(x,R({},"".concat(x,"-disabled"),E),f?.input),style:l?.input,ref:c,size:k,type:I}))},S=function(){var a=Number(_)>0;if(j||N){var O=ee(K),F=te(O).length,L=ne(N)==="object"?N.formatter({value:O,count:F,maxLength:_}):"".concat(F).concat(a?" / ".concat(_):"");return o.createElement(o.Fragment,null,!!N&&o.createElement("span",{className:h("".concat(x,"-show-count-suffix"),R({},"".concat(x,"-show-count-has-suffix"),!!j),f?.count),style:Y({},l?.count)},L),j)}return null};return o.createElement(ce,Z({},C,{prefixCls:x,className:P,inputElement:w(),handleReset:U,value:ee(K),focused:b,triggerFocus:M,suffix:S(),disabled:E,classes:q,classNames:f,styles:l}))});export{ce as B,ve as I,ee as f,p as r};
